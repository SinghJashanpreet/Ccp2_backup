<!--
 * @Author: Huanghao Tu
 * @Date: 2022-10-12 12:48:43
 * @LastEditTime: 2023-01-06 11:28:13
 * @Description: Contact Basic Information 
-->
<template>
    <template if:true={showBasicinfo}>
        <template if:true={allUserLoader}>
            <div
                style="position: relative; width:100%; height:350px; display:flex; justify-content:center; align-items:center;">
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </div>
        </template>
        <template if:false={allUserLoader}>
            <div class="main">
                
                <div class="half top">
                    <img src={backgroundImagePC} style="width: 100%; height:100%">
                </div>
                </div>
                <div class="half bottom2">
                    <div class="center-content2">
                        
            <!-- <div class="body body-vw slds-col--padded">
                <div class="profile">
                    <template if:true={isLoading}>
                        <lightning-spinner alternative-text="Loading" variant="brand" size="large">
                        </lightning-spinner>
                    </template>
                    <div class="hero">
                        <div class="hero__wrapper">
                            <picture class="hero__image">
                                <source media="(max-width: 767px)" srcset={backgroundImageMobile}>
                                <img src={backgroundImagePC} alt="" style="width: 100vw; height:40vw">
                            </picture>
                        </div> -->
                        <!-- <div class="container container--sp-no-padding"> -->
                            <!-- <div class="container__inner"> -->
        
                                <div class="contents-box contents-box--inner">
                                    <!-- <template if:true={errors}>
                                        <div style="color:red">an error occurs: {errors}</div>
                                    </template> -->
                                    <!-- 基本情報  -->
                                    <!-- <p class="text-main text-main--profile-title">基本情報の変更をご希望の際は、「<a onclick={toInquiryPage}
                                            class="underline-decoration">お問い合わせ</a>」よりご連絡をお願い致します。</p> -->
                                    <div class="section profile">
                                        <h3 class="profile-section__title">基本情報</h3>
                                        
                                        <!-- <template for:each={contactData} for:item="cd">
                                            <dl key={cd.id} class="section__outline">
                                                <div class="step2-btns">
                                                    <button class="top-btn" onclick={handlechangeadmin}>管理者変更</button>
                                                    <button class="top-btn">編集する</button>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>会社名</dt>
                                                    <dd>{cd.accountName}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>お客様番号</dt>
                                                    <dd>{cd.accountCode}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>氏名</dt>
                                                    <dd>{cd.lastName}&ensp;{cd.firstName}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>氏名（フリガナ）</dt>
                                                    <dd>{cd.lastNameKana}&ensp;{cd.firstNameKana}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>部署</dt>
                                                    <dd>{cd.department}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>役職</dt>
                                                    <dd>{cd.title}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>メールアドレス</dt>
                                                    <dd>{cd.email}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>電話番号</dt>
                                                    <dd>{cd.phone}</dd>
                                                </div>
                                                <div class="section__definition-list">
                                                    <dt>携帯番号</dt>
                                                    <dd>{cd.mobilePhone}</dd>
                                                </div> -->
                                                <!-- <div class="section__definition-list">
                                                    <dt class = "aligntop">利用するサービス</dt>
                                                    <div class="form-item__wrapper _tell padtop">
                                                        <template if:true={isFDPShow}>
                                                            <div class="checkbox-wrapper">
                                                                <label class="label-box" for="1"><input class="input-checkbox" type="checkbox" name="baseService1"
                                                                disabled checked>
                                                                <a href="javascript:void(0);" target="_blank">
                                                                    基本サービス（三菱ふそう_ショップ）
                                                                </a></label>
                                                            </div>
                                                        </template>
                                                        <template if:true={vehicleShow}>
                                                            <div class="checkbox-wrapper">
                                                                <label class="label-box" for="1"><input class="input-checkbox" type="checkbox" name="vehiclereservation1"
                                                                disabled checked={vehiclereservation}>
                                                                <a href="javascript:void(0);" target="_blank">
                                                                    車検・入庫予約
                                                                </a></label>
                                                            </div>
                                                        </template>
                                                        <div class="checkbox-wrapper">
                                                            <label class="label-box" for="1"><input class="input-checkbox" type="checkbox" name="requestbook1"
                                                            disabled checked={requestbook}>
                                                            <a href="javascript:void(0);" target="_blank">
                                                                部整月次請求書（電子版）
                                                            </a></label>
                                                        </div>
                                                        <template if:true={isFDPShow}>
                                                            <div class="checkbox-wrapper">
                                                                <label >※基本サービス（三菱ふそう_ショップ）は、すべての会員がご利用可能です。</label>
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div> -->
                                                <!-- <div class="section__definition-list">
                                                    <dt>連絡の取りやすい時間帯</dt>
                                                    <div class="conv-times">
                                                        <div class="inside-time">
                                                            <div class="weektime">
                                                                <p>平日</p>
                                                                <p>土日祝</p>
                                                            </div>
                                                            <div class="time-val">
                                                                <dd>{workdayStart}時~{workdayEnd}時</dd>
                                                                <dd>{workdayStart}時~{workdayEnd}時</dd>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            <!-- </dl>
                                        </template> -->
                                        <dl class="section__outline">
                                            <template if:true={showcanceledit}>
                                                <div class="step2-btns">
                                                    <button class="top-btn" onclick={handlechangeadmin}>管理者変更</button>
                                                    <button class="top-btn" onclick={handleEdit}>編集する</button>
                                                </div>
                                            </template>
                                            <div class="section__definition-list">
                                                    <dt>会社名</dt>
                                                    <dd>{userDetailData.accountname}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>お客様番号</dt>
                                                <dd>{userDetailData.siebelAccountCode}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>氏名</dt>
                                                <dd>{userDetailData.lastName} {userDetailData.firstName}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>氏名（フリガナ）</dt>
                                                <dd>{userDetailData.lastNameKana} {userDetailData.firstNameKana}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>社員番号</dt>
                                                <dd>{userDetailData.Employee_Code}</dd>
                                            </div>
                                            <div class="section__definition-list-branch">
                                                <dt style="display: flex; height: 56px; align-items:center;">所属</dt>
                                                <dd>
                                                    <!-- <template for:each={userDetailData.Branchs} for:item="branch">
                                                        <div key={branch.Name}>
                                                            <div class="data">{branch.Name}</div>
                                                        </div>
                                                    </template> -->
                                                    <div class="data-branch2">
                                                        <template for:each={userDetailData.Branchs} for:item="branch">
                                                            <li key={branch} style="list-style: none;" class="data">{branch}</li>
                                                        </template>
                                                    </div>
                                                </dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>部署</dt>
                                                <dd>{userDetailData.Department}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>役職</dt>
                                                <dd>{userDetailData.Title}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>メールアドレス</dt>
                                                <dd>{userDetailData.email}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>電話番号</dt>
                                                <dd>{userDetailData.Phone}</dd>
                                            </div>
                                            <div class="section__definition-list">
                                                <dt>携帯番号</dt>
                                                <dd>{userDetailData.MobilePhone}</dd>
                                            </div>
                                            <div class="section__definition-list-time">
                                                <dt class="st-st" style="padding-top: 18px; align-items: baseline; display: flex; height: 110px;">連絡の取りやすい時間帯</dt>
                                                <div class="conv-times">
                                                    <div class="inside-time">
                                                        <div class="weektime">
                                                            <p class = "time-inside">平日</p>
                                                            <p class="values-inside">{startwork} 時 ~ {endwork} 時</p>
                                                            
                                                        </div>
                                                        <div class="weektime">
                                                            <p class="time-inside">土日祝</p>
                                                            <p class="values-inside">{startholiday} 時 ~ {endholiday} 時</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                        </dl>
                                           
                                    </div>
        
                                    <!-- button edit and change administrator -->
                                    
        
                                    <!-- Time Selection -->
                                    <!-- <h3 class="profile-section__title _second">アンケート</h3> -->
                                    <!-- <fieldset class="form-item _time-wrapper">
                                        <label class="form-label">
                                            <span class="label-title">アンケート</span>
                                            <br>
                                            <span class="label-body">ご連絡の取りやすい時間帯
                                            </span>
                                        </label>
                                        <div class="select-time__block">
                                            <div class="select-time__list-wrapper">
                                                <label class="time-label-text" for="time">平日</label>
                                                <div class="select-time__block__list">
                                                    <div class="select-time__wrapper">
                                                        <select class="select-time" name="workdayStart" onchange={handleTimeSelection}>
                                                            <option value="" disabled></option>
                                                            <template for:each={options} for:item="op">
                                                                <option key={op.value} value={op.value}>{op.label}</option>
                                                            </template>
                                                        </select>
                                                    </div>
                                                    <span>時</span>
                                                </div>
                                                <span>〜</span>
                                                <div class="select-time__block__list _right">
                                                    <div class="select-time__wrapper">
                                                        <select class="select-time" name="workdayEnd" onchange={handleTimeSelection}>
                                                            <option value="" disabled></option>
                                                            <template for:each={options} for:item="op">
                                                                <option key={op.value} value={op.value}>{op.label}</option>
                                                            </template>
                                                        </select>
                                                    </div>
                                                    <span>時</span>
                                                </div>
                                            </div>
                                            <div class="select-time__list-wrapper">
                                                <label class="time-label-text" for="time">土日祝</label>
                                                <div class="select-time__block__list">
                                                    <div class="select-time__wrapper">
                                                        <select class="select-time" name="holidayStart" onchange={handleTimeSelection}>
                                                            <option value="" disabled></option>
                                                            <template for:each={options} for:item="op">
                                                                <option key={op.value} value={op.value}>{op.label}</option>
                                                            </template>
                                                        </select>
                                                    </div>
                                                    <span>時</span>
                                                </div>
                                                <span>〜</span>
                                                <div class="select-time__block__list _right">
                                                    <div class="select-time__wrapper">
                                                        <select class="select-time" name="holidayEnd" onchange={handleTimeSelection}>
                                                            <option value="" disabled></option>
                                                            <template for:each={options} for:item="op">
                                                                <option key={op.value} value={op.value}>{op.label}</option>
                                                            </template>
                                                        </select>
                                                    </div>
                                                    <span>時</span>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset> -->
                                    <!-- Checkbox Section -->
                                    <!-- <fieldset class="form-item form-item--checkbox">
                                        <label class="form-label" for="">FUSOからのご案内</label>
                                        <div class="checkbox-block">
                                            <ul class="checkbox-block__list">
                                                <li class="checkbox-block__list-item">
                                                    <label class="label-box" for="1">
                                                        <input class="input-checkbox" type="checkbox" name="isNotReceiveByPhone" onchange={handleCheckboxChange} value="1">
                                                        電話でのご案内を希望しない
                                                    </label>
                                                </li>
                                                <li class="checkbox-block__list-item">
                                                    <label class="label-box" for="2">
                                                        <input class="input-checkbox" type="checkbox" name="isNotReceiveByPostcard" onchange={handleCheckboxChange} value="1">
                                                        ハガキでのご案内を希望しない
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </fieldset> -->
                                    <!-- Button Section -->
                                    <div class="button__wrapper">
                                        <!-- <c-ccp2cancel-membership onclosemodal ={closemainmodal}></c-ccp2cancel-membership> -->
                                        <!-- <button class="return_btn--m" onclick={navigateToHome}>トップに戻る</button> -->
                                        <!-- <button class="primary_btn--m disabled" onclick={saveClick} name="saveButton">保存</button> -->
                                    </div>
                                </div>
                            
                </div>
            </div>
        </template>
    </template>
    <template if:true={showchangeAdmin}>
        <div class="main">
            <div class="half top">
                <img src={backgroundImagePC} style="width: 100%; height: 100%;">
            </div>
        </div>
            <div class="half bottom">
                <div class="center-content">
                    <template if:true={showstep1}>
                        <div class="heading-auth">
                            <p>管理者変更</p>
                        </div>
                        <div class="step">
                            <img src={truckpic3} style="width: 32%; height:7.5vh;">
                        </div>
                        <div class="contents-box contents-box--inner" style="width: 55vw;">
                            <!-- <template if:true={errors}>
                                <div style="color:red">an error occurs: {errors}</div>
                            </template> -->
                            <!-- 基本情報  -->
                            <!-- <p class="text-main text-main--profile-title">基本情報の変更をご希望の際は、「<a onclick={toInquiryPage}
                                    class="underline-decoration">お問い合わせ</a>」よりご連絡をお願い致します。</p> -->
                            <div class="section profile">
                                <h3 class="step1-head">下記の管理者を変更します。</h3>
                                

                                <div class="form_container">
                                    <div class="data-rec">
                                        <div class="records">
                                            <div class="head">会社名</div>
                                            <div class="data">{userDetailData.accountname}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">お客様番号</div>
                                            <div class="data">{userDetailData.siebelAccountCode}</div>
                                            
                                        </div>
                                        <div class="records">
                                            <div class="head">氏名</div>
                                            <div class="data">{userDetailData.lastName} {userDetailData.firstName}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">氏名（フリガナ）</div>
                                            <div class="data">{userDetailData.lastNameKana} {userDetailData.firstNameKana}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">社員番号</div>
                                            <div class="data">{userDetailData.Employee_Code}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">所属</div>
                                            <div class="data-branch">
                                                <template for:each={userDetailData.Branchs} for:item="branch">
                                                    <li key={branch} style="list-style: none;" class="data">{branch}</li>
                                                </template>
                                            </div>
                                            
                                        </div>
                                        <div class="records">
                                            <div class="head">部署</div>
                                            <div class="data">{userDetailData.Department}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">役職</div>
                                            <div class="data">{userDetailData.Title}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">メールアドレス</div>
                                            <div class="data">{userDetailData.email}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">電話番号</div>
                                            <div class="data">{userDetailData.Phone}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">携帯番号</div>
                                            <div class="data">{userDetailData.MobilePhone}</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- <dl class="section__outline">
                                    
                                    <div class="section__definition-list">
                                        <dt>会社名</dt>
                                        <dd>{userDetailData.accountname}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>お客様番号</dt>
                                        <dd>{userDetailData.siebelAccountCode}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>氏名</dt>
                                        <dd>{userDetailData.lastName} {userDetailData.firstName}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>氏名（カタカナ）</dt>
                                        <dd>{userDetailData.lastNameKana} {userDetailData.firstNameKana}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>社員番号</dt>
                                        <dd>{userDetailData.Employee_Code}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>所属</dt>
                                        <dd>
                                            <template for:each={userDetailData.Branchs} for:item="branch">
                                                <div key={branch.Name}>
                                                    <div class="data">{branch.Name}</div>
                                                </div>
                                            </template>
                                        </dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>部署</dt>
                                        <dd>{userDetailData.Department}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>役職</dt>
                                        <dd>{userDetailData.Title}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>メールアドレス</dt>
                                        <dd>{userDetailData.email}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>電話番号</dt>
                                        <dd>{userDetailData.Phone}</dd>
                                    </div>
                                    <div class="section__definition-list">
                                        <dt>携帯番号</dt>
                                        <dd>{userDetailData.MobilePhone}</dd>
                                    </div>
                                    
                                </dl> -->
                                   
                            </div>
                            <!-- userDropdown.html -->

                            <div>
                                <div class="dropdown-label">
                                    <label for="userDropdown">新管理者を指定してください。</label>
                                </div>
                                
                                <!-- <div class="custom-dropdown">
                                    <select id="userDropdown" class="dropdown" onchange={handleChange}>
                                            <option value="選択してください" hidden selected>選択してください</option>
                                            <template for:each={userList} for:item="user">
                                                <option key={user.Id} class="devil" value={user.Id}>{user.Name}</option>
                                            </template>
                                    </select>
                                </div> -->

                                <div class="custom-dropdown">
                                    <div class="dropdown">
                                        <!-- <span class="selected-value">{selectedValue}</span> -->
                                        <input type="text" onclick={toggleDropdown} class="Inputs1 icon" placeholder="選択してください" value={selectedValue} readonly>
                                        <ul class="dropdown-options" if:true={isDropdownOpen}>
                                            <template for:each={userList} for:item="user">
                                                <li key={user.value} class="dropdown-option" data-id={user.value} onclick={handleChange} onmouseover={handleMouseOver} onmouseout={handleMouseOut}>
                                                    {user.label}
                                                </li>
                                            </template>
                                        </ul>
                                    </div>
                                </div>
    
                                <div>
                                    <label>新しい管理者情報を追加したい場合、先に<span style="color:red">会員管理画面</span>に<span style="color: red;">会員追加</span>してください。</label>
                                </div>
                            </div>

                            
                            <template if:true={newusershow}>
                                <div class="form_container">
                                    <div class="data-rec">
                                        <div class="records">
                                            <div class="head">氏名</div>
                                            <div class="data">{userInfo.lastName} {userInfo.firstName}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">氏名（フリガナ）</div>
                                            <div class="data">{userInfo.lastNameKana} {userInfo.firstNameKana}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">社員番号</div>
                                            <div class="data">{userInfo.Employee_Code}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">所属</div>
                                            <div class="data-branch">
                                                <template for:each={userInfo.Branchs} for:item="branch">
                                                    <li key={branch} style="list-style: none;" class="data">
                                                            {branch}
                                                    </li>
                                                </template>
                                            </div>
                                            <!-- TO BE CONTINUED BRANCH
                                            <div class="data">{userDetailData.accountname}</div> -->
                                        </div>
                                        <div class="records">
                                            <div class="head">部署</div>
                                            <div class="data">{userInfo.Department}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">役職</div>
                                            <div class="data">{userInfo.Title}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">メールアドレス</div>
                                            <div class="data">{userInfo.email}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">電話番号</div>
                                            <div class="data">{userInfo.Phone}</div>
                                        </div>
                                        <div class="records">
                                            <div class="head">携帯番号</div>
                                            <div class="data">{userInfo.MobilePhone}</div>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <label class="check-final">
                                <input type="checkbox" name="agreechange" onchange={handleCheckboxChange} checked={termServiceChecked} class="selected">
                                <p>管理者変更を同意します。</p>
                            </label>    

                            <div class="footer-buttons">
                                <button class="cancel-button" onclick={handlecancel}>キャンセル</button>
                                <button class="next-button" onclick={handlenext}>次へ</button>
                            </div>
                            
                        </div>
                    </template>
                    <template if:true={showstep2}>
                        <div class="heading-auth">
                            <p>管理者変更</p>
                        </div>
                        <div class="step">
                            <img src={truckpic2} style="width: 32%; height:7.5vh;">
                        </div>

                        <div class="contents-box contents-box--inner" style="width: 55vw;">
                            <div class="label1-step2">
                                <label>変更内容をご確認ください。</label><br><br>
                                <label>元の管理者情報</label>
                            </div>
                            <div class="form_container">
                                <div class="data-rec">
                                    <div class="records">
                                        <div class="head">会社名</div>
                                        <div class="data">{userDetailData.accountname}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">お客様番号</div>
                                        <div class="data">{userDetailData.siebelAccountCode}</div>
                                        
                                    </div>
                                    <div class="records">
                                        <div class="head">氏名</div>
                                        <div class="data">{userDetailData.lastName} {userDetailData.firstName}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">氏名（フリガナ）</div>
                                        <div class="data">{userDetailData.lastNameKana} {userDetailData.firstNameKana}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">社員番号</div>
                                        <div class="data">{userDetailData.Employee_Code}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">所属</div>
                                        <!-- TO BE CONTINUED BRANCH
                                        <div class="data">{userDetailData.accountname}</div> -->
                                        <div class="data-branch">
                                            <template for:each={userDetailData.Branchs} for:item="branch">
                                                <li key={branch} style="list-style: none;" class="data">{branch}</li>
                                            </template>
                                        </div>
                                    </div>
                                    <div class="records">
                                        <div class="head">部署</div>
                                        <div class="data">{userDetailData.Department}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">役職</div>
                                        <div class="data">{userDetailData.Title}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">メールアドレス</div>
                                        <div class="data">{userDetailData.email}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">電話番号</div>
                                        <div class="data">{userDetailData.Phone}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">携帯番号</div>
                                        <div class="data">{userDetailData.MobilePhone}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="label1-step2">
                                <label>新管理者情報</label>
                            </div>
                            <div class="form_container">
                                <div class="data-rec">
                                    <div class="records">
                                        <div class="head">氏名</div>
                                        <div class="data">{userInfo.lastName} {userInfo.firstName}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">氏名（フリガナ）</div>
                                        <div class="data">{userInfo.lastNameKana} {userInfo.firstNameKana}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">社員番号</div>
                                        <div class="data">{userInfo.Employee_Code}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">所属</div>
                                        <!-- TO BE CONTINUED BRANCH
                                        <div class="data">{userDetailData.accountname}</div> -->
                                        <div class="data-branch">
                                            <template for:each={userInfo.Branchs} for:item="branch">
                                                <li key={branch} style="list-style: none;" class="data">{branch}</li>
                                            </template>
                                        </div>
                                        
                                    </div>
                                    <div class="records">
                                        <div class="head">部署</div>
                                        <div class="data">{userInfo.Department}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">役職</div>
                                        <div class="data">{userInfo.Title}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">メールアドレス</div>
                                        <div class="data">{userInfo.email}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">電話番号</div>
                                        <div class="data">{userInfo.Phone}</div>
                                    </div>
                                    <div class="records">
                                        <div class="head">携帯番号</div>
                                        <div class="data">{userInfo.MobilePhone}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="footer-buttons2">
                            <button class="cancel-button" onclick={handleprev}>修正</button>
                            <button class="next-button" onclick={handlenext2}>完了</button>
                        </div>
                    </template>
                    <template if:true={showstep3}>
                        <div class="heading-auth">
                            <p>管理者変更完了</p>
                        </div>
                        <div class="step">
                            <img src={truckpic1} style="width: 32%; height:7.5vh;">
                        </div>
                        <div>
                            <label class="label-step3">管理者が変更しました。</label>
                        </div>
                        <div class="last-button">
                            <button class="next-button" onclick={handlelastbutton}>基本情報へ</button>
                        </div>
                    </template>
                </div> 
            </div> 
    </template>
    <template if:true={showeditscreen}>
        <div class="main">
            <div class="half top">
                <img src={backgroundImagePC} style="width: 100%; height:100%">
            </div>
        </div>
            <div class="half bottom">
                <div class="center-content">
                    <div class="main-content">
                        <h2 class="heading">基本情報</h2>
                        <div class="form">
                            <div class="form_container form_container_save">
                                <!-- Company Name -->
                                <div class="records">
                                    <div class="head head-save">会社名</div>
                                    <div class="data">{userDetailData.accountname}</div>
                                </div>
            
                                <!-- Customer Number -->
                                <div class="records">
                                    <div class="head head-save">お客様番号</div>
                                    <div class="data">{userDetailData.siebelAccountCode}</div>
                                </div>
            
                                <!-- Full Name -->
                                <div class="records">
                                    <div class="head head-save head-save-cnt">氏名<span
                                            class="reqtxt">必須</span></div>
                                    <div class="data">
                                        <div class="dataCellName">
                                            <span class="data-cell-item">姓</span>
                                            <span class="data-cell-item">名</span>
                                        </div>
                                        <div class="dataCellName">
                                            <div class="name-div">
                                                <input type="text" class={contactClassLastName} onchange={handleInputChange}
                                                    data-field="姓" value={InputLastName} placeholder="森下" maxlength="10" />
                                                
                                                <div if:true={Lnameerror} class="error-text">{Lnameerror}</div>
                                            </div>
                                            <div class="name-div">
                                                <input type="text" class={contactClassFirstName}
                                                    onchange={handleInputChange} data-field="名" value={InputFirstName}
                                                    placeholder="○○" maxlength="10" />
                                                <div if:true={Fnameerror} class="error-text">{Fnameerror}</div>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Name (furigana) -->
                                <div class="records">
                                    <div class="head head-save head-save-cnt">氏名（フリガナ）<span
                                            class="reqtxt">必須</span>
                                    </div>
                                    <div class="data">
                                        <div class="dataCellName">
                                            <span class="data-cell-item">姓（フリガナ）</span>
                                            <span class="data-cell-item">名（フリガナ）</span>
                                        </div>
                                        <div class="dataCellName">
                                            <div class="name-div">
                                                <input type="text" class={contactClassLKanaName}
                                                    onchange={handleInputChange} data-field="姓（フリガナ）" value={InputLKanaName}
                                                    placeholder="モリシタ" maxlength="10" />
                                                    <div if:true={Lkanaerror} class="error-text">{Lkanaerror}</div>
                                                    
                                            </div>
                                            <div class="name-div">
                                                <input type="text" class={contactClassFKanaName}
                                                    onchange={handleInputChange} data-field="名（フリガナ）" value={InputFKanaName}
                                                    placeholder="○○" maxlength="10" />
                                                    
                                                    <div if:true={Fkanaerror} class="error-text">{Fkanaerror}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
            
                                <!-- Employee Number -->
                                <div class="records">
                                    <div class="head head-save">社員番号</div>
                                    <div class="data"><input type="text" onchange={handleInputChange} data-field="社員番号"
                                            value={InputEmpCode} placeholder="A0002" maxlength="24"></div>
                                </div>
            
                                <!-- Affiliation -->
                                <div class="records">
                                    <div class="head head-save-branch">所属
                                        <span class="reqtxt">必須</span>
                                    </div>
                                    
                                    <div class="data" style="display:flex; gap:12px; ">
                                        <div class="dataDrop">
                                            <input type="text" oninput={handleSearch} onclick={handlebranChange}
                                                class={contactClassBranch} placeholder="選択してください">
                                                <div if:true={ErrorText} class="error-text">{ErrorText}</div>
                                            <template if:true={showlist}>
                                                <div class="lists" onclick={handleInsideClick}>
                                                    <template for:each={filteredbranch} for:item="veh">
                                                        <div key={veh.value} class="list-item"
                                                            onclick={handleBranchSelect} data-id={veh.value}>
                                                            <p>{veh.label}</p>
                                                        </div>
                                                    </template>
                                                </div>
                                            </template>
                                        </div>

                                        <div class="branchrecords">
                                            <template if:false={branchPlaceholder}>
                                                <div class="scrollbar">
                                                    <template for:each={branchfromjunction} for:item="veh">
                                                        <div key={veh.Id} class="record-item">
                                                            <lightning-icon icon-name="utility:close" size="x-small"
                                                                alternative-text="Delete" onclick={handleDeleteBranch}
                                                                data-id={veh.Id} class="filtericn"></lightning-icon>
                                                            <span>{veh.Name}</span>
                                                            <br>
                                                        </div>
                                                    </template>
                                                    
                                                        <template for:each={branch} for:item="veh">
                                                            <div key={veh.Id} class="record-item">
                                                                <lightning-icon icon-name="utility:close" size="x-small"
                                                                    alternative-text="Delete" onclick={handleDeleteBranch}
                                                                    data-id={veh.Id} class="filtericn"></lightning-icon>
                                                                <span>{veh.Name}</span>
                                                                <br>
                                                            </div>
                                                        </template>
                                                </div>
                                                
                                            </template>
                                            <template if:true={branchPlaceholder}>
                                                <p class="custom-placeholder">選択された勤務地</p>
                                            </template>
                                        </div>
                                        
                                        <!-- <div class="branchrecords">
                                            <template for:each={branch} for:item="veh">
                                                <div key={veh.Id} class="record-item">
                                                    <lightning-icon icon-name="utility:close" size="x-small"
                                                        alternative-text="Delete" onclick={handleDeleteBranch}
                                                        data-id={veh.Id} class="filtericn"></lightning-icon>
                                                    <span>{veh.Name}</span>
                                                    <br>
                                                </div>
                                            </template>
                                        </div> -->
                                    </div>
                                    <!-- </div> -->
                                </div>
                                <!-- Deploy -->
                                <div class="records">
                                    <div class="head head-save">部署</div>
                                    <div class="data"><input type="text" onchange={handleInputChange} data-field="部署"
                                            value={InputDepartment} placeholder="自動・製造・エネルギー" maxlength="24"></div>
                                </div>
            
                                <!-- Post -->
                                <div class="records">
                                    <div class="head head-save">役職</div>
                                    <div class="data">
                                        <input type="text" onchange={handleInputChange} data-field="役職"
                                            value={InputPost} placeholder="課長" maxlength="24">
                                    </div>
                                </div>
            
                                <!-- Email Address -->
                                <div class="records">
                                    <div class="head head-save head-save-cnt">メールアドレス<span
                                            class="reqtxt">必須</span>
                                    </div>
                                    <div class="data">
                                        <input type="text" onchange={handleInputChange}
                                            data-field="メールアドレス" value={InputEmail} class={contactClassEmail}
                                            placeholder="○○@cubastion.com" maxlength="40">
                                            <div if:true={emailerrorText} class="error-text">{emailerrorText}</div> <!-- Error message display -->
                                        </div>
                                    </div>
            
                                <!-- Telephone Number -->
                                <div class="records">
                                    <div class="head head-save2 head-save-align">電話番号<span
                                            class="reqtxt">必須</span>
                                    </div>
                                    <div class="data data-align">
                                        <div class="">電話番号あるいは携帯番号のいずれかをハイフンなしで入力してください</div>
                                        <div class="records_number" style="margin-top: 15px;">
                                            <div class="phn-label">電話番号</div>
                                            <div class="phn"><input type="tel" class={contactClassTelephone}
                                                    onchange={handleInputChange} data-field="電話番号"
                                                    value={InputTelephone} oninput={handleInputValidation} maxlength="11" pattern="\d*" required
                                                    placeholder="03621268002">
                                                    
                                                </div>
                                        </div>
                                        <div class="records_number">
                                            <div class="phn-label">携帯番号</div>
                                            <div class="phn"><input type="tel" class={contactClassCellPhone}
                                                    onchange={handleInputChange} oninput={handleInputValidation} data-field="携帯番号"
                                                    value={InputCellPhone} maxlength="11" required
                                                    placeholder="03621268002">
                                                    
                                                </div>
                                        </div>
                                        <div if:true={cellPhoneErrorText} class="error-text">{cellPhoneErrorText}</div>
                                        <div if:true={telephoneErrorText} class="error-text">{telephoneErrorText}</div>
                                    </div>
                                </div>

                                <div class="records">
                                    <div class="head head-save2 head-save-align">連絡の取りやすい時間帯
                                    </div>
                                    <div class="data" style="display: flex;">
                                        <div class="data2 data-align-time-label">
                                            <label>平日</label>
                                            <label>土日祝</label>
                                        </div>
                                        <div class="align-time-outer">
                                            <div class="data2 data-align-time">
                                                <input type="text" onchange={handleInputChange}  data-field="平日s" name="workdaystart"
                                                    value={workdayStart} placeholder="9" maxlength="2">
                                                    <label class="btw-label">時 ~</label>
                                                <input type="text" onchange={handleInputChange} data-field="平日e"
                                                    value={workdayEnd} placeholder="10" maxlength="2">
                                                    <label class="btw-label">時</label>
                                            </div>
                                            <div class="data2 data-align-time">
                                                <input type="text" onchange={handleInputChange} data-field="土日祝s"
                                                    value={holidayStart} placeholder="9" maxlength="2">
                                                    <label class="btw-label">時 ~</label>
                                                <input type="text" onchange={handleInputChange} data-field="土日祝e"
                                                    value={holidayEnd} placeholder="10" maxlength="2">
                                                    <label class="btw-label">時</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-footer">
                                <div class="button2">
                                    <div class="btn2" onclick={handleCanceledit}>
                                        <P class="toedit2">キャンセル</P>
                                    </div>
                                </div>
                                <!-- Save Button -->
                                <div class="btn-yes-final btn-yes-save">
                                    <div class="btn btn-save" onclick={saveFormData}>
                                        <p class="toedit txt-save">保存する</p>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </template>
    <template if:true={showconfModal}>
        <div class="modal-background-last">
            <div class="modal-window-small">
                <div class="warning">
                    <p class="warntxt">管理者を変更しますか？</p>
                </div>
                <div class="buttons-small">
                    <div class="cancelbutton btn" onclick={handleNo}>
                        <p class="buttontxt">いいえ</p>
                    </div>
                    <div class="searchbutton btn" onclick={handleYes}>
                        <p class="buttontxt2">はい</p>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template if:true={showcancelModal}>
        <div class="modal-background-last">
            <div class="modal-window-small">
                <div class="warning">
                    <p class="warntxt">入力された内容が保存していませんが、</p>
                       <p class="warntxt more"> 終了しますか？</p>
                </div>
                <div class="buttons-small">
                    <div class="cancelbutton btn" onclick={handleNoCancel}>
                        <p class="buttontxt">いいえ</p>
                    </div>
                    <div class="searchbutton btn" onclick={handleYesCancel}>
                        <p class="buttontxt2">はい</p>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template if:true={showagreeModal}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" style="background-color: #ffffff0d;">
            <div class="modal-background-last2">
                <div class="modal-window-small2" style="border-radius: 8px; background-color: rgba(255, 255, 255, 0.9); height:max-content;">
                    <div class="content-modal">
                        <h1>「管理者変更を同意します」<br>
                            をチェックしてください
                        </h1>
                        <div class="btn-modal2">
                            <button class="btn-yes" onclick={handleagreeyes}>はい</button>
                        </div>
                    </div>

                </div>


            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
    <template if:true={showcancelModaledit}>
        <div class="modal-background-last">
            <div class="modal-window-small">
                <div class="warning">
                    <p class="warntxt">入力された内容が保存していませんが、</p>
                       <p class="warntxt more"> 終了しますか？</p>
                </div>
                <div class="buttons-small">
                    <div class="cancelbutton btn" onclick={handleNoCanceledit}>
                        <p class="buttontxt">いいえ</p>
                    </div>
                    <div class="searchbutton btn" onclick={handleYesCanceledit}>
                        <p class="buttontxt2">はい</p>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <template if:true={showModal}>
        <div class="modal-background-last">
            <div class="modal-window-loader">
                    <p class="warntxt">基本情報の編集が保存しました。</p>
            </div>
        </div>
    </template>
    
</template>