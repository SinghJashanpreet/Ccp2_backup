<template>
  <div class="main">
    <div class="half top">
      <img src={backgroundImagePC} class="main_image" alt="background_Image" />
    </div>
    <div class="half bottom">
      <div class="center-content">
        <div class="main-partition">
          <div
            if:true={showSearchPageLoader}
            style="
              width: 100%;
              height: 100%;
              display: flex;
              justify-content: center;
              align-items: center;
            "
          >
            <lightning-spinner
              alternative-text="Loading"
              size="small"
              style="border-radius: 8px"
            ></lightning-spinner>
          </div>
          <div class="left-header">
            <p class="left-header-top">{labels2.ccp2_dtfsa_head}</p>
            <p class="left-header-bottom">{labels2.ccp2_dtfsa_head2}</p>
          </div>
          <div class="diff-container">
            <div class="right-div">
              <div class="right-top">
                <div class="right-bottom-header">
                  <p>{labels2.ccp2_dtfsa_notif}</p>
                  <div class="notif-labels">
                    <div style="display: flex; gap: 4px; align-items: center">
                      <p>{labels2.ccp2_ei_emailNot}</p>
                      <template if:true={emailNotif}>
                        <p class="notif-btn">{labels2.ccp2_cal_notify_onn}</p>
                      </template>
                      <template if:false={emailNotif}>
                        <p class="notif-btn">{labels2.ccp2_cal_notify_off}</p>
                      </template>
                    </div>
                    <p
                      style="
                        color: var(--red-button-alers, #e10202);
                        text-decoration-line: underline;
                        cursor: pointer;
                      "
                      onclick={navigateBasicInfo}
                    >
                      {labels2.ccp2_cal_notify_settings}
                    </p>
                  </div>
                </div>
                <div class="notificationsdtfsa">
                  <template if:false={notificationLength}>
                    <div class="noNotification">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="134"
                        height="77"
                        viewBox="0 0 134 77"
                        fill="none"
                      >
                        <path
                          d="M66.78 76.1269C103.662 76.1269 133.56 70.0885 133.56 62.6398C133.56 55.1912 103.662 49.1528 66.78 49.1528C29.8984 49.1528 0 55.1912 0 62.6398C0 70.0885 29.8984 76.1269 66.78 76.1269Z"
                          fill="#F5F5F5"
                        />
                        <path
                          d="M114.774 25.5849L93.6007 3.42381C92.5843 1.91326 91.1006 1 89.5375 1H44.0144C42.4513 1 40.9676 1.91326 39.9513 3.42188L18.7778 25.5868V43.3877H114.774V25.5849Z"
                          stroke="#D9D9D9"
                        />
                        <path
                          d="M86.8371 31.6951C86.8371 28.6027 88.9114 26.0498 91.4846 26.0479H114.774V60.9927C114.774 65.0831 112.019 68.4356 108.618 68.4356H24.9341C21.5325 68.4356 18.7778 65.0812 18.7778 60.9927V26.0479H42.0674C44.6405 26.0479 46.7148 28.5969 46.7148 31.6893V31.7317C46.7148 34.824 48.8121 37.3211 51.3832 37.3211H82.1688C84.7398 37.3211 86.8371 34.8009 86.8371 31.7085V31.6951Z"
                          fill="#FAFAFA"
                          stroke="#D9D9D9"
                        />
                      </svg>
                      <p>{labels2.ccp2_dtfsa_noNotif}</p>
                    </div>
                  </template>
                  <template if:true={notificationLength}>
                    <template for:each={notificationDetails} for:item="notif">
                      <div key={notif.Id}>
                        <template if:false={notif.reissue}>
                          <div class="issueNotif">
                            <div class="creatednotif">{notif.CreatedDate}</div>
                            <div>
                              <p>{labels2.ccp2_dtfsa_issue1}</p>
                              <p>{labels2.ccp2_dtfsa_issue2}</p>
                            </div>
                            <div>
                              <template
                                for:each={notif.docTypes}
                                for:item="doc"
                              >
                                <div key={doc} class="issueBullets">
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="12"
                                    height="12"
                                    viewBox="0 0 12 12"
                                    fill="none"
                                  >
                                    <circle cx="6" cy="6" r="6" fill="black" />
                                  </svg>
                                  <p>{doc}</p>
                                </div>
                              </template>
                            </div>
                          </div>
                        </template>
                        <template if:true={notif.reissue}>
                          <div class="issueNotif">
                            <div class="creatednotif">{notif.CreatedDate}</div>
                            <div>
                              <p>{labels2.ccp2_dtfsa_reissue1}</p>
                              <div style="display: flex">
                                <p>{labels2.ccp2_dtfsa_reissue2}</p>
                                <p
                                  style="
                                    color: var(--red-button-alers, #e10202);
                                  "
                                >
                                  {labels2.ccp2_dtfsa_reissue3}
                                </p>
                                <p>{labels2.ccp2_dtfsa_reissue4}</p>
                              </div>
                            </div>
                            <div>
                              <template
                                for:each={notif.docTypes}
                                for:item="doc"
                              >
                                <div key={doc} class="issueBullets">
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="12"
                                    height="12"
                                    viewBox="0 0 12 12"
                                    fill="none"
                                  >
                                    <circle
                                      cx="6"
                                      cy="6"
                                      r="6"
                                      fill="#E10202"
                                    />
                                  </svg>
                                  <p>{doc}</p>
                                </div>
                              </template>
                            </div>
                          </div>
                        </template>
                      </div>
                    </template>
                  </template>
                </div>
              </div>
              <!-- <div class="right-bottom">
                <div class="right-bottom-header">
                  <p>{labels2.ccp2_dtfsa_basic}</p>
                </div>
                <div class="right-main-row">
                  <div class="right-field-names">
                    <p>{labels2.ccp2_dtfsa_account}</p>
                  </div>
                  <div class="right-field-val">
                    <p>{userDetailData.accountname}</p>
                  </div>
                </div>
  
                <div class="right-main-row">
                  <div class="right-field-names">
                    <p>{labels2.ccp2_dtfsa_custNum}</p>
                  </div>
                  <div class="right-field-val">
                    <p>{userDetailData.siebelAccountCode}</p>
                  </div>
                </div>
  
                <div class="right-main-row">
                  <div class="right-field-names">
                    <p>{labels2.ccp2_dtfsa_fullName}</p>
                  </div>
                  <div class="right-field-val">
                    <p>{userDetailData.lastName} {userDetailData.firstName}</p>
                  </div>
                </div>
              </div> -->
            </div>
            <div class="left-div">
              <!-- <div class="left-header">
                <p class="left-header-top">{labels2.ccp2_dtfsa_head}</p>
                <p class="left-header-bottom">
                  {labels2.ccp2_dtfsa_head2}
                </p>
              </div> -->
              <p
                style="
                  font-size: 16px;
                  font-weight: 700;
                  color: var(--black-txt-bg, #262626);
                  border-bottom: 1px solid var(--Gray-line, #d9d9d9);
                  width: 100%;
                  padding-bottom: 8px;
                "
              >
                {labels2.ccp2_dtfsa_search}
              </p>
              <div class="left-main">
                <div class="left-main-row" style="padding: 16px 0">
                  <div class="left-field-names">
                    <p>{labels2.ccp2_dtfsa_account}</p>
                  </div>
                  <div class="left-field-val">
                    <p class="account-name">{userDetailData.accountname}</p>
                  </div>
                </div>
                <div class="left-main-row">
                  <div class="left-field-names">
                    <p>{labels2.ccp2_dtfsa_name}</p>
                  </div>
                  <div class="left-field-val">
                    <div class="dropdown-container">
                      <!-- Dropdown Toggle -->
                      <div class={branchNameclass} onclick={toggleDropdown}>
                        <div class="dropdown-button">
                          <template if:true={areanyselected}>
                            <template if:true={areAllSelected}>
                              <p class="selected-placeholder-val">
                                {labels2.ccp2_dtfsa_all}
                              </p>
                            </template>
                            <template if:false={areAllSelected}>
                              <p class="selected-placeholder-val">
                                {selectedCount}{labels2.ccp2_dtfsa_selected}
                              </p>
                            </template>
                          </template>
                          <template if:false={areanyselected}>
                            <p class="placeholder-not-sel">
                              {labels2.ccp2_dtfsa_Nameplaceholder}
                            </p>
                          </template>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 25"
                              fill="none"
                            >
                              <g clip-path="url(#clip0_37108_198980)">
                                <g filter="url(#filter0_d_37108_198980)">
                                  <path
                                    d="M21 8.7834L18.885 6.5L12 13.917L5.115 6.5L3 8.7834L12 18.5L21 8.7834Z"
                                    fill="#7B7B7B"
                                  />
                                </g>
                              </g>
                              <defs>
                                <filter
                                  id="filter0_d_37108_198980"
                                  x="-17"
                                  y="-13.5"
                                  width="58"
                                  height="52"
                                  filterUnits="userSpaceOnUse"
                                  color-interpolation-filters="sRGB"
                                >
                                  <feFlood
                                    flood-opacity="0"
                                    result="BackgroundImageFix"
                                  />
                                  <feColorMatrix
                                    in="SourceAlpha"
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                    result="hardAlpha"
                                  />
                                  <feOffset />
                                  <feGaussianBlur stdDeviation="10" />
                                  <feComposite in2="hardAlpha" operator="out" />
                                  <feColorMatrix
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in2="BackgroundImageFix"
                                    result="effect1_dropShadow_37108_198980"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in="SourceGraphic"
                                    in2="effect1_dropShadow_37108_198980"
                                    result="shape"
                                  />
                                </filter>
                                <clipPath id="clip0_37108_198980">
                                  <rect
                                    width="24"
                                    height="24"
                                    fill="white"
                                    transform="translate(0 0.5)"
                                  />
                                </clipPath>
                              </defs>
                            </svg>
                          </div>
                        </div>
                      </div>

                      <!-- Dropdown Content -->
                      <template if:true={isDropdownOpen}>
                        <div
                          class="dropdown-content"
                          onclick={handleInsideClick}
                        >
                          <!-- Left section for selecting document type -->
                          <div class="dropdown-left">
                            <div class={accountButtonContainerClass}>
                              <div
                                class={accountButtonClass}
                                onclick={handleAccountSelect}
                              >
                                {labels2.ccp2_dtfsa_Accountdoc}
                              </div>
                            </div>
                            <div class={vehicleButtonContainerClass}>
                              <div
                                class={vehicleButtonClass}
                                onclick={handleVehicleSelect}
                              >
                                {labels2.ccp2_dtfsa_Vehdoc}
                              </div>
                            </div>
                          </div>

                          <!-- Right section for checkboxes based on selection -->
                          <div class="dropdown-right">
                            <template if:true={isAccountSelected}>
                              <div style="margin-bottom: 10px">
                                <input
                                  type="checkbox"
                                  class="checkbox-acc"
                                  id="allAccount"
                                  value="all"
                                  checked={isAllAccountsChecked}
                                  onclick={handleSelectAllAccounts}
                                />
                                <label class="account-label"
                                  >{labels2.ccp2_dtfsa_all}</label
                                >
                              </div>
                              <template
                                for:each={accountCheckboxes}
                                for:item="item"
                              >
                                <div
                                  key={item.label}
                                  style="margin-bottom: 10px"
                                >
                                  <input
                                    type="checkbox"
                                    class="checkbox-acc"
                                    id={item.label}
                                    name="account"
                                    value={item.label}
                                    checked={item.isChecked}
                                    onclick={handleCheckboxChange}
                                  />
                                  <label class="account-label"
                                    >{item.label}</label
                                  >
                                  <p class="account-description">
                                    {item.description}
                                  </p>
                                </div>
                              </template>
                            </template>

                            <template if:true={isVehicleSelected}>
                              <div style="margin-bottom: 10px">
                                <input
                                  type="checkbox"
                                  class="checkbox-acc"
                                  id="allVehicle"
                                  value="all"
                                  checked={isAllVehiclesChecked}
                                  onclick={handleSelectAllVehicles}
                                />
                                <label class="account-label"
                                  >{labels2.ccp2_dtfsa_all}</label
                                >
                              </div>
                              <template
                                for:each={vehicleCheckboxes}
                                for:item="item"
                              >
                                <div
                                  key={item.label}
                                  style="margin-bottom: 10px"
                                >
                                  <input
                                    type="checkbox"
                                    id={item.label}
                                    class="checkbox-acc"
                                    name="vehicle"
                                    value={item.label}
                                    checked={item.isChecked}
                                    onclick={handleCheckboxChange}
                                  />
                                  <label class="account-label"
                                    >{item.label}</label
                                  >
                                  <p class="account-description">
                                    {item.description}
                                  </p>
                                </div>
                              </template>
                            </template>
                          </div>
                        </div>
                      </template>
                    </div>
                    <template if:true={branchNameError}>
                      <p class="error-text">
                        {labels2.ccp2_dtfsa_DocnameError}
                      </p>
                    </template>
                  </div>
                </div>
                <div class="left-main-row">
                  <div class="left-field-names">
                    <p>{labels2.ccp2_dtfsa_regNum}</p>
                  </div>
                  <div class="left-field-val">
                    <input
                      type="text"
                      name=""
                      class={errorClass}
                      placeholder={labels2.ccp2_dtfsa_placeholder}
                      value={registrationNum}
                      oninput={handleRegistrationInput}
                    />
                    <template if:false={regError}>
                      <p class="below-input">
                        *{labels2.ccps_dtfsa_regNumguide}
                      </p>
                    </template>

                    <template if:true={regError}>
                      <p class="below-input" style="color: #e10202">
                        *{labels2.ccp2_dtfsa_regErr}
                      </p>
                    </template>
                  </div>
                </div>
                <div class="left-main-row">
                  <div class="left-field-names">
                    <p>{labels2.ccps_dtfsa_contract}</p>
                  </div>
                  <div class="left-field-val">
                    <input
                      type="text"
                      name=""
                      class="input-box"
                      placeholder={labels2.ccp2_dtfsa_placeholder2}
                      value={contractNum}
                      oninput={handleContractInput}
                      maxlength="19"
                    />
                    <p class="below-input">
                      *{labels2.ccp2_dtfsa_contractGuide}
                    </p>
                  </div>
                </div>
                <div class="left-main-row">
                  <div class="left-field-names">
                    <p>{labels2.ccp2_dtfsa_creationDate}</p>
                  </div>
                  <div class="left-field-val">
                    <div class="month-year-picker-container">
                      <!-- Start Date Dropdown -->
                      <div class="dropdown-wrapper-date">
                        <div
                          class="dropdown-header-date"
                          onclick={toggleStartDropdown}
                        >
                          <span>{startDateLabel}</span>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 25"
                              fill="none"
                            >
                              <g clip-path="url(#clip0_37108_198980)">
                                <g filter="url(#filter0_d_37108_198980)">
                                  <path
                                    d="M21 8.7834L18.885 6.5L12 13.917L5.115 6.5L3 8.7834L12 18.5L21 8.7834Z"
                                    fill="#7B7B7B"
                                  />
                                </g>
                              </g>
                              <defs>
                                <filter
                                  id="filter0_d_37108_1989801"
                                  x="-17"
                                  y="-13.5"
                                  width="58"
                                  height="52"
                                  filterUnits="userSpaceOnUse"
                                  color-interpolation-filters="sRGB"
                                >
                                  <feFlood
                                    flood-opacity="0"
                                    result="BackgroundImageFix"
                                  />
                                  <feColorMatrix
                                    in="SourceAlpha"
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                    result="hardAlpha"
                                  />
                                  <feOffset />
                                  <feGaussianBlur stdDeviation="10" />
                                  <feComposite in2="hardAlpha" operator="out" />
                                  <feColorMatrix
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in2="BackgroundImageFix"
                                    result="effect1_dropShadow_37108_198980"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in="SourceGraphic"
                                    in2="effect1_dropShadow_37108_198980"
                                    result="shape"
                                  />
                                </filter>
                                <clipPath id="clip0_37108_1989801">
                                  <rect
                                    width="24"
                                    height="24"
                                    fill="white"
                                    transform="translate(0 0.5)"
                                  />
                                </clipPath>
                              </defs>
                            </svg>
                          </div>
                        </div>
                        <div
                          if:true={isStartDropdownOpen}
                          class="dropdown-list-date"
                          onclick={handleInsideClick}
                        >
                          <template
                            for:each={startMonthOptions}
                            for:item="option"
                          >
                            <div
                              key={option.value}
                              data-value={option.value}
                              class={option.cssClass}
                              onclick={handleStartDateSelect}
                            >
                              {option.label}
                            </div>
                          </template>
                        </div>
                      </div>

                      <p>{labels2.ccp2_dtfsa_from}</p>
                      <!-- End Date Dropdown -->
                      <div class="dropdown-wrapper-date">
                        <div
                          class="dropdown-header-date"
                          onclick={toggleEndDropdown}
                        >
                          <span>{endDateLabel}</span>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 25"
                              fill="none"
                            >
                              <g clip-path="url(#clip0_37108_198980)">
                                <g filter="url(#filter0_d_37108_198980)">
                                  <path
                                    d="M21 8.7834L18.885 6.5L12 13.917L5.115 6.5L3 8.7834L12 18.5L21 8.7834Z"
                                    fill="#7B7B7B"
                                  />
                                </g>
                              </g>
                              <defs>
                                <filter
                                  id="filter0_d_37108_1989802"
                                  x="-17"
                                  y="-13.5"
                                  width="58"
                                  height="52"
                                  filterUnits="userSpaceOnUse"
                                  color-interpolation-filters="sRGB"
                                >
                                  <feFlood
                                    flood-opacity="0"
                                    result="BackgroundImageFix"
                                  />
                                  <feColorMatrix
                                    in="SourceAlpha"
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                    result="hardAlpha"
                                  />
                                  <feOffset />
                                  <feGaussianBlur stdDeviation="10" />
                                  <feComposite in2="hardAlpha" operator="out" />
                                  <feColorMatrix
                                    type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in2="BackgroundImageFix"
                                    result="effect1_dropShadow_37108_198980"
                                  />
                                  <feBlend
                                    mode="normal"
                                    in="SourceGraphic"
                                    in2="effect1_dropShadow_37108_198980"
                                    result="shape"
                                  />
                                </filter>
                                <clipPath id="clip0_37108_1989802">
                                  <rect
                                    width="24"
                                    height="24"
                                    fill="white"
                                    transform="translate(0 0.5)"
                                  />
                                </clipPath>
                              </defs>
                            </svg>
                          </div>
                        </div>
                        <template if:true={isEndDropdownOpen}>
                          <div
                            class="dropdown-list-date"
                            onclick={handleInsideClick}
                          >
                            <template
                              for:each={endMonthOptions}
                              for:item="option"
                            >
                              <div
                                key={option.value}
                                data-value={option.value}
                                class={option.cssClass}
                                onclick={handleEndDateSelect}
                              >
                                {option.label}
                              </div>
                            </template>
                          </div>
                        </template>
                      </div>
                      <p>{labels2.ccp2_dtfsa_to}</p>
                    </div>
                    <p class="below-input">*{labels2.ccp2_dtfsa_3months}</p>
                  </div>
                </div>
              </div>
              <div class="lower">
                <div class="left-main-row">
                  <p
                    style="
                      color: #000;
                      font-weight: 400;
                      line-height: 150%;
                      letter-spacing: 0.36px;
                      font-size: 16px;
                      margin-top: 10px;
                    "
                  >
                    *{labels2.ccp2_dtfsa_req}
                  </p>
                </div>
                <div class="footer-search-reset">
                  <div class="reset-button" onclick={handleReset}>
                    <!-- <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                      width="22" height="25" viewBox="0 0 24 25" class="input-filter-list-items">
                                      <image
                                          xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAAfNJREFUSEvNVVFu2kAQnbEE33CDreQd+TM5QcMN0hOU3ICcgHCC9gakJwg9QegJwif2rlXfIHwb7U41aC1ZYGMnKlH8h5l5b97um2eECz94YXz4PARKqdFwOFyWZXlfFEXRV3kvBQI+GAyeEfGKmdfGmMl/I6iDCygzP3rvfzvnNn2UdCogoicAuG2aWMj2+/3iHFErgVJKSWOSJMp7/wwAKpCsEHHMzF+Dop33fpbn+a+mIRoJtNZXiPjinJtKY52EmTfGmOvw7gEAvguw935irV0fkzQSENHfMPEiyzIBgQC4YuapMWZTARGR/D8HgKIsy+uiKHZ1khMCrfUUEZfSkGXZlz5u0VqLw2689/fW2p9dBIdiZr4zxjz2ISAiMcFTk4VPFBDRKwCMyrIcH8ttIwtL+MrMO2PM+KwCImIpyLKs08J1oLa+j1dQu7BG2zUdU3UHiPgnTdObriM62O4tmUNELwAgOXVijJMjChcmezDy3j9YaxfnnBTH8TyKIhlK9mByHBtti3awXdjQRpIQgnNEnEmdc+5bnuerXpssRXEcz6Io+hEainBkd/Jba71ERBliFPKodWfOWlHiQRKzCrbKupUl5VIl6OrR0VtBvTAQ3aZpeoiBJEmmALDebredX7Y3LVOf2HiXgvcAVz0XV/APo2otKbuBn60AAAAASUVORK5CYII="
                                          x="0" y="0" width="24" height="25" />
                                      </svg> -->
                    <svg
                      width="24"
                      height="25"
                      viewBox="0 0 24 25"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M11 21.4822C8.98333 21.2322 7.3125 20.3531 5.9875 18.8447C4.6625 17.3364 4 15.5656 4 13.5322C4 12.4322 4.21667 11.3781 4.65 10.3697C5.08333 9.36139 5.7 8.48223 6.5 7.73223L7.925 9.15723C7.29167 9.72389 6.8125 10.3822 6.4875 11.1322C6.1625 11.8822 6 12.6822 6 13.5322C6 14.9989 6.46667 16.2947 7.4 17.4197C8.33333 18.5447 9.53333 19.2322 11 19.4822V21.4822ZM13 21.4822V19.4822C14.45 19.2156 15.6458 18.5239 16.5875 17.4072C17.5292 16.2906 18 14.9989 18 13.5322C18 11.8656 17.4167 10.4489 16.25 9.28223C15.0833 8.11556 13.6667 7.53223 12 7.53223H11.925L13.025 8.63223L11.625 10.0322L8.125 6.53223L11.625 3.03223L13.025 4.43223L11.925 5.53223H12C14.2333 5.53223 16.125 6.30723 17.675 7.85723C19.225 9.40723 20 11.2989 20 13.5322C20 15.5489 19.3375 17.3114 18.0125 18.8197C16.6875 20.3281 15.0167 21.2156 13 21.4822Z"
                        fill="#262626"
                      />
                    </svg>

                    <p class="reset-label" onclick={handleReset}>
                      {labels2.ccp2_dtfsa_reset}
                    </p>
                  </div>
                  <button class="search-button" onclick={handleSearchclick}>
                    {labels2.ccp2_dtfsa_searchBtn}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <template if:true={searchDtfsaDocs}>
          <div class="bottom-div" if:false={showSearchPageLoader}>
            <div class="searchCount">
              <p>
                {labels2.ccp2_dtfsa_searchResults}ï¼š{searchLength}{labels2.ccp2_dtfsa_searchItem}
              </p>
              <!-- <p></p> -->
            </div>
            <template if:true={searchLength}>
              <div class="table-container">
                <div class="table">
                  <div class="table-header">
                    <span class="table-header-item" style="margin-left: 24px">
                      <p>{labels2.ccp2_dtfsa_searchdocName}</p>
                    </span>
                    <span class="table-header-item">
                      <p>{labels2.ccp2_dtfsa_searchRegnum}</p>
                    </span>
                    <span class="table-header-item">
                      <p>{labels2.ccp2_dtfsa_searchContract}</p>
                    </span>
                    <span class="table-header-item">
                      <p>{labels2.ccp2_dtfsa_searchCreationDate}</p>
                    </span>
                    <span class="table-header-item">
                      <p>{labels2.ccp2_dtfsa_searchTotalIsses}</p>
                    </span>
                    <span class="table-header-item">
                      <p></p>
                    </span>
                  </div>
                  <div class="einvoiceItems">
                    <template for:each={searchDtfsaDocs} for:item="elm">
                      <div class="table-row" key={elm.dataId}>
                        <span class="table-row-item">
                          <input
                            type="checkbox"
                            class="checkbox-item"
                            data-id={elm.dataId}
                            checked={elm.selected}
                            onchange={handleCheckboxChangeDownload}
                          />

                          {elm.documentName}
                        </span>
                        <span class="table-row-item"
                          >{elm.registrationNumber}</span
                        >
                        <span class="table-row-item">{elm.contractNumber}</span>
                        <span class="table-row-item">{elm.issuedate}</span>
                        <span class="table-row-item">{elm.issueCount}</span>
                        <span
                          class="table-row-item-down"
                          onclick={onClickIssue}
                          data-idd={elm.dataId}
                          data-json={elm.encryptedJson}
                          data-siebel={elm.customerCD}
                          data-close={elm.issuedate}
                          data-issuecount={elm.issueCount}
                          data-namee={elm.fileName}
                          data-doc={elm.documentName}
                          data-reg={elm.registrationNumber}
                        >
                          <svg
                            onclick={onClickIssue}
                            data-idd={elm.dataId}
                            data-json={elm.encryptedJson}
                            data-issuecount={elm.issueCount}
                            data-siebel={elm.customerCD}
                            data-doc={elm.documentName}
                            data-close={elm.issuedate}
                            data-namee={elm.fileName}
                            data-reg={elm.registrationNumber}
                            xmlns="http://www.w3.org/2000/svg"
                            width="25"
                            height="25"
                            viewBox="0 0 25 25"
                            fill="none"
                          >
                            <path
                              onclick={onClickIssue}
                              data-idd={elm.dataId}
                              data-json={elm.encryptedJson}
                              data-siebel={elm.customerCD}
                              data-doc={elm.documentName}
                              data-issuecount={elm.issueCount}
                              data-namee={elm.fileName}
                              data-close={elm.issuedate}
                              data-reg={elm.registrationNumber}
                              d="M18.5 15.5V18.5H6.5V15.5H4.5V18.5C4.5 19.6 5.4 20.5 6.5 20.5H18.5C19.6 20.5 20.5 19.6 20.5 18.5V15.5H18.5ZM17.5 11.5L16.09 10.09L13.5 12.67V4.5H11.5V12.67L8.91 10.09L7.5 11.5L12.5 16.5L17.5 11.5Z"
                              fill="#E10202"
                            />
                          </svg>
                          {labels2.ccp2_dtfsa_searchIssue}
                        </span>
                      </div>
                    </template>
                  </div>
                </div>
              </div>
              <div class="buttons-all-selected">
                <template if:false={allSelectedLength}>
                  <button class="select-all-btn" onclick={handleSelectAll}>
                    {labels2.ccp2_dtfsa_selectAll}
                  </button>
                </template>
                <template if:true={allSelectedLength}>
                  <button class="select-all-btn" onclick={handleDeSelectAll}>
                    {labels2.ccp2_dtfsa_deselectAll}
                  </button>
                </template>
                <template if:true={selectedListLen}>
                  <button class="download-button" onclick={handleDownloadAll}>
                    {labels2.ccp2_ei_issue}
                  </button>
                </template>
                <div class="help-div">
                  <p>{labels2.ccp2_dtfsa_cannotDown}</p>
                  <div class="here-div" onclick={handleClickHere}>
                    <p class="click-here">{labels2.ccp2_dtfsa_cannotDownred}</p>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_36315_90380)">
                        <path
                          d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                          fill="#E10202"
                        />
                        <path
                          d="M10.8857 13.7868C10.819 13.3308 10.8429 12.926 10.9571 12.5723C11.081 12.2187 11.2524 11.9023 11.4714 11.6231C11.6905 11.3346 11.9143 11.0647 12.1429 10.8135C12.3714 10.5622 12.5667 10.3156 12.7286 10.0736C12.8905 9.83164 12.9714 9.57572 12.9714 9.30584C12.9714 9.07318 12.919 8.8731 12.8143 8.70558C12.719 8.52876 12.581 8.39382 12.4 8.30076C12.2286 8.2077 12.0143 8.16117 11.7571 8.16117C11.4429 8.16117 11.1571 8.23562 10.9 8.38452C10.6429 8.52411 10.4 8.71489 10.1714 8.95685L9 7.9099C9.37143 7.49112 9.80952 7.15144 10.3143 6.89086C10.8286 6.63029 11.3952 6.5 12.0143 6.5C12.5857 6.5 13.0952 6.59772 13.5429 6.79315C14 6.98858 14.3571 7.28638 14.6143 7.68655C14.8714 8.07741 15 8.57064 15 9.16624C15 9.56641 14.9143 9.92005 14.7429 10.2272C14.581 10.5343 14.3762 10.8228 14.1286 11.0926C13.8905 11.3532 13.6524 11.6138 13.4143 11.8744C13.1857 12.1349 13 12.4188 12.8571 12.7259C12.7143 13.033 12.6667 13.3866 12.7143 13.7868H10.8857ZM11.8143 17.5C11.4333 17.5 11.119 17.3697 10.8714 17.1091C10.6238 16.8486 10.5 16.5321 10.5 16.1599C10.5 15.769 10.6238 15.448 10.8714 15.1967C11.119 14.9454 11.4333 14.8198 11.8143 14.8198C12.1857 14.8198 12.4952 14.9454 12.7429 15.1967C12.9905 15.448 13.1143 15.769 13.1143 16.1599C13.1143 16.5321 12.9905 16.8486 12.7429 17.1091C12.4952 17.3697 12.1857 17.5 11.8143 17.5Z"
                          fill="#E10202"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_36315_90380">
                          <rect width="24" height="24" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
              </div>
            </template>
            <template if:false={searchLength}>
              <div class="noSearch">
                <div>
                  <img src={nosearch} alt="No Search" />
                </div>
                <div>{labels2.ccp2_dtfsa_noDocsFound}</div>
              </div>
            </template>
          </div>
        </template>
        <template if:true={isShowReissueModal}>
          <div class="modal-background-last">
            <div class="modal-window-small">
              <div class="warning-modal">
                <p class="warntxt">{labels2.ccp2_dtfsa_reissueMod1}</p>
                <p class="warntxt more">{labels2.ccp2_dtfsa_reissueMod2}</p>
              </div>
              <div class="buttons-all">
                <button class="cancelbutton-download" onclick={handleNoReissue}>
                  {labels2.ccp2_ei_no}
                </button>
                <button
                  class="download-button2"
                  onclick={onClickReissueYesModal}
                >
                  {labels2.ccp2_ei_yes}
                </button>
              </div>
            </div>
          </div>
        </template>
        <template if:true={isModalOpen}>
          <div class="modal-background-last">
            <div class="modal-window-small2">
              <div class="warning-modal2">
                <template if:true={allfilesdownloaded}>
                  <p class="warntxt">{labels2.ccp2_dtfsa_downloaded_header}</p>
                </template>
                <template if:false={allfilesdownloaded}>
                  <p class="warntxt">{labels2.ccp2_ei_file_downloading}</p>
                </template>
                <div class="documents-div scrollbar2">
                  <template for:each={fileStatuses} for:item="file">
                    <div key={file.name} class="status-row">
                      <div class="file-name">
                        <div>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                          >
                            <path
                              d="M21.3746 5.08929C21.6246 5.33929 21.8389 5.67857 22.0174 6.10714C22.196 6.53571 22.2853 6.92857 22.2853 7.28571V22.7143C22.2853 23.0714 22.1603 23.375 21.9103 23.625C21.6603 23.875 21.3567 24 20.9996 24H2.99958C2.64244 24 2.33887 23.875 2.08887 23.625C1.83887 23.375 1.71387 23.0714 1.71387 22.7143V1.28571C1.71387 0.928571 1.83887 0.625 2.08887 0.375C2.33887 0.125 2.64244 0 2.99958 0H14.9996C15.3567 0 15.7496 0.0892857 16.1782 0.267857C16.6067 0.446429 16.946 0.660714 17.196 0.910714L21.3746 5.08929ZM15.4282 1.82143V6.85714H20.4639C20.3746 6.59821 20.2764 6.41518 20.1692 6.30804L15.9773 2.11607C15.8701 2.00893 15.6871 1.91071 15.4282 1.82143ZM20.571 22.2857V8.57143H14.9996C14.6424 8.57143 14.3389 8.44643 14.0889 8.19643C13.8389 7.94643 13.7139 7.64286 13.7139 7.28571V1.71429H3.42815V22.2857H20.571ZM6.85672 10.7143C6.85672 10.5893 6.8969 10.4866 6.97726 10.4062C7.05762 10.3259 7.1603 10.2857 7.2853 10.2857H16.7139C16.8389 10.2857 16.9415 10.3259 17.0219 10.4062C17.1023 10.4866 17.1424 10.5893 17.1424 10.7143V11.5714C17.1424 11.6964 17.1023 11.7991 17.0219 11.8795C16.9415 11.9598 16.8389 12 16.7139 12H7.2853C7.1603 12 7.05762 11.9598 6.97726 11.8795C6.8969 11.7991 6.85672 11.6964 6.85672 11.5714V10.7143ZM16.7139 13.7143C16.8389 13.7143 16.9415 13.7545 17.0219 13.8348C17.1023 13.9152 17.1424 14.0179 17.1424 14.1429V15C17.1424 15.125 17.1023 15.2277 17.0219 15.308C16.9415 15.3884 16.8389 15.4286 16.7139 15.4286H7.2853C7.1603 15.4286 7.05762 15.3884 6.97726 15.308C6.8969 15.2277 6.85672 15.125 6.85672 15V14.1429C6.85672 14.0179 6.8969 13.9152 6.97726 13.8348C7.05762 13.7545 7.1603 13.7143 7.2853 13.7143H16.7139ZM16.7139 17.1429C16.8389 17.1429 16.9415 17.183 17.0219 17.2634C17.1023 17.3438 17.1424 17.4464 17.1424 17.5714V18.4286C17.1424 18.5536 17.1023 18.6562 17.0219 18.7366C16.9415 18.817 16.8389 18.8571 16.7139 18.8571H7.2853C7.1603 18.8571 7.05762 18.817 6.97726 18.7366C6.8969 18.6562 6.85672 18.5536 6.85672 18.4286V17.5714C6.85672 17.4464 6.8969 17.3438 6.97726 17.2634C7.05762 17.183 7.1603 17.1429 7.2853 17.1429H16.7139Z"
                              fill="black"
                            />
                          </svg>
                        </div>
                        <p title={file.name}>{file.ellname}</p>
                      </div>
                      <div class="file-status">
                        {file.status}
                        <div
                          class="loader-container"
                          if:true={file.isDownloading}
                        >
                          <div class="loader"></div>
                        </div>
                        <div
                          class="loader-container"
                          if:true={file.isDownloaded}
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="22"
                            height="22"
                            viewBox="0 0 22 22"
                            fill="none"
                          >
                            <g clip-path="url(#clip0_25593_164559)">
                              <path
                                d="M10.9984 21.9968C17.0726 21.9968 21.9968 17.0726 21.9968 10.9984C21.9968 4.92415 17.0726 0 10.9984 0C4.92415 0 0 4.92415 0 10.9984C0 17.0726 4.92415 21.9968 10.9984 21.9968Z"
                                fill="#2BB44C"
                              />
                              <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M8.28224 12.5904L15.5876 6.7899C15.7653 6.65007 15.9803 6.56585 16.2057 6.54784C16.4311 6.52982 16.6568 6.57881 16.8544 6.68864C17.0521 6.79847 17.2128 6.96426 17.3165 7.16517C17.4203 7.36608 17.4623 7.59316 17.4374 7.81788C17.4206 7.96746 17.3743 8.11224 17.3013 8.24387C17.2283 8.3755 17.13 8.49138 17.012 8.58483L8.71405 15.1716L8.63349 15.2361C8.60028 15.2594 8.56586 15.2809 8.53037 15.3005L8.48525 15.3295C8.22329 15.4648 7.9192 15.4938 7.63641 15.4103C7.35362 15.3269 7.11397 15.1375 6.96746 14.8816L6.83856 14.6657L4.70849 10.963C4.63379 10.8331 4.58542 10.6898 4.56613 10.5411C4.54684 10.3925 4.55701 10.2416 4.59607 10.0969C4.63512 9.95222 4.70228 9.81665 4.79373 9.69792C4.88517 9.5792 4.9991 9.47965 5.12902 9.40496C5.3914 9.25411 5.70296 9.21367 5.99516 9.29254C6.13984 9.33159 6.27541 9.39875 6.39413 9.4902C6.51286 9.58164 6.61241 9.69558 6.6871 9.82549L8.28546 12.5904H8.28224Z"
                                fill="white"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_25593_164559">
                                <rect width="22" height="22" fill="white" />
                              </clipPath>
                            </defs>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
              <div class="buttons-small">
                <button onclick={closeModal} class="download-button">
                  {labels2.ccp2_dtfsa_complete}
                </button>
              </div>
            </div>
          </div>
        </template>
        <template if:true={isShowReissueModal2}>
          <div class="modal-background-last">
            <div class="modal-window-small">
              <div class="warning-modal">
                <p class="warntxt">{labels2.ccp2_dtfsa_reissueMod1}</p>
                <p class="warntxt more">{labels2.ccp2_dtfsa_reissueMod2}</p>
              </div>
              <div class="buttons-all">
                <button
                  class="cancelbutton-download"
                  onclick={handleNoReissue2}
                >
                  {labels2.ccp2_ei_no}
                </button>
                <button
                  class="download-button2"
                  onclick={onClickReissueYesModal2}
                >
                  {labels2.ccp2_ei_yes}
                </button>
              </div>
            </div>
          </div>
        </template>
        <template if:true={openHelpmodal}>
          <div class="modal-background-last">
            <div class="modal-window-small-help">
              <div class="help-modal">
                <div class="cross">
                  <svg
                    style="cursor: pointer"
                    onclick={closeHelp}
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      style="cursor: pointer"
                      onclick={closeHelp}
                      d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
                      fill="black"
                    />
                  </svg>
                </div>
                <div class="help-scroll help-modal">
                  <div class="red-modal">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="25"
                      viewBox="0 0 24 25"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_36203_225146)">
                        <path
                          d="M12 2.5C6.48 2.5 2 6.98 2 12.5C2 18.02 6.48 22.5 12 22.5C17.52 22.5 22 18.02 22 12.5C22 6.98 17.52 2.5 12 2.5ZM12 20.5C7.59 20.5 4 16.91 4 12.5C4 8.09 7.59 4.5 12 4.5C16.41 4.5 20 8.09 20 12.5C20 16.91 16.41 20.5 12 20.5Z"
                          fill="#E10202"
                        />
                        <path
                          d="M10.8857 14.2868C10.819 13.8308 10.8429 13.426 10.9571 13.0723C11.081 12.7187 11.2524 12.4023 11.4714 12.1231C11.6905 11.8346 11.9143 11.5647 12.1429 11.3135C12.3714 11.0622 12.5667 10.8156 12.7286 10.5736C12.8905 10.3316 12.9714 10.0757 12.9714 9.80584C12.9714 9.57318 12.919 9.3731 12.8143 9.20558C12.719 9.02876 12.581 8.89382 12.4 8.80076C12.2286 8.7077 12.0143 8.66117 11.7571 8.66117C11.4429 8.66117 11.1571 8.73562 10.9 8.88452C10.6429 9.02411 10.4 9.21489 10.1714 9.45685L9 8.4099C9.37143 7.99112 9.80952 7.65144 10.3143 7.39086C10.8286 7.13029 11.3952 7 12.0143 7C12.5857 7 13.0952 7.09772 13.5429 7.29315C14 7.48858 14.3571 7.78638 14.6143 8.18655C14.8714 8.57741 15 9.07064 15 9.66624C15 10.0664 14.9143 10.4201 14.7429 10.7272C14.581 11.0343 14.3762 11.3228 14.1286 11.5926C13.8905 11.8532 13.6524 12.1138 13.4143 12.3744C13.1857 12.6349 13 12.9188 12.8571 13.2259C12.7143 13.533 12.6667 13.8866 12.7143 14.2868H10.8857ZM11.8143 18C11.4333 18 11.119 17.8697 10.8714 17.6091C10.6238 17.3486 10.5 17.0321 10.5 16.6599C10.5 16.269 10.6238 15.948 10.8714 15.6967C11.119 15.4454 11.4333 15.3198 11.8143 15.3198C12.1857 15.3198 12.4952 15.4454 12.7429 15.6967C12.9905 15.948 13.1143 16.269 13.1143 16.6599C13.1143 17.0321 12.9905 17.3486 12.7429 17.6091C12.4952 17.8697 12.1857 18 11.8143 18Z"
                          fill="#E10202"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_36203_225146">
                          <rect
                            width="24"
                            height="24"
                            fill="white"
                            transform="translate(0 0.5)"
                          />
                        </clipPath>
                      </defs>
                    </svg>
                    <p>{labels2.ccp2_dtfsa_bulkDown}</p>
                  </div>
                  <div>
                    <p>{labels2.ccp2_dtfsa_popUp1}</p>
                    <p>{labels2.ccp2_dtfsa_popUp2}</p>
                  </div>
                  <div>
                    <img src={help1} alt="help" />
                  </div>
                  <div>
                    <p>{labels2.ccp2_dtfsa_regardSite1}</p>
                    <p>{labels2.ccp2_dtfsa_regardSite2}</p>
                  </div>
                  <div>
                    <img src={help2} alt="help" />
                  </div>
                  <div style="padding-bottom: 30px">
                    <p>{labels2.ccp2_dtfsa_avail1}</p>
                    <p>{labels2.ccp2_dtfsa_avail2}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </template>
        <!-- <template if:false={hasDTFSA}>
          <div class="modal-background-last">
            <div class="modal-window-small-dtfsa">
              <div class="dtfsa-div">
                <div class="perm">
                  <p>{labels2.ccp2_dtfsa_noAcc1}</p>
                  <p>{labels2.ccp2_dtfsa_noAcc2}</p>
                </div>
                <button class="search-button" onclick={navigateToHome}>{labels2.ccp2_dtfsa_return}</button>
              </div>
            </div>
          </div>
        </template> -->
        <template if:true={serverError}>
          <div class="modal-background-last">
            <div class="modal-window-small-dtfsa">
              <div class="dtfsa-div">
                <p style="font-weight: 700">{labels2.ccp2_dtfsa_commErr}</p>
                <div class="perm">
                  <p>{labels2.ccp2_dtfsa_serverErr}</p>
                  <p>{labels2.ccp2_dtfsa_tryAgain}</p>
                </div>
                <button class="search-button" onclick={handleServerErr}>
                  OK
                </button>
              </div>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</template>