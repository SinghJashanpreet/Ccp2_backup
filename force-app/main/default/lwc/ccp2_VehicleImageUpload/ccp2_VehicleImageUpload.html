<template>
  <div class="upload-main">
    <div class={uploadContainerCss}>
      <div class="upload-image-container" id="image-container">
        <template if:false={isImageEmpty}>
          <div class={imageScrollerContainer}>
            <template for:each={uploadImagesArray} for:item="elm">
              <div class={uploadImageCss} key={elm.fileName}>
                <div class="upload-image-top">
                  <img src={elm.fileURL} alt="Uploaded Image" />
                </div>
                <div class="upload-image-bottom no-scroller">
                  <p>File name: {elm.fileName}</p>
                  <lightning-icon icon-name="utility:close" size="x-small" alternative-text="Delete"
                    onclick={handleDeleteImage} data-id={elm.id} data-name={elm.fileName} class="filtericn"></lightning-icon>
                </div>
              </div>
            </template>
          </div>

          <div class={uploadImageIconCss}>
            <button onclick={handleFileUpload} class={UploadImageButtonCss} disabled={isUplaodButtonDisabled}>
              <img src={upload} width="48px" height="39px" />
              <h3>写真をアップロード</h3>
            </button>
            <input name="vehicleImage" accept=".jpg,.jpeg,.png" type="file" class="file-input"
              onchange={handleFilesChange} />

            <div class={instructionContainerCss}>
              <div>
                <div class="upload-instruction-heading">
                  <img src={error_outline} width="22px" height="22px" />
                  <h3>注意事項</h3>
                </div>
                <div class="upload-instruction-content">
                  <ul>
                    <li>ファイル形式：.jpg/.jpeg/.png </li>
                    <li>一つのファイルが10MBを超えないように </li>
                    <li>最大10枚 </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

        </template>

        <template if:true={isImageEmpty}>
          <div class="upload-image-sample">
            <img src={sample} class="sample-image" />
          </div>
          <div class="upload-image-sample-right">
            <button onclick={handleFileUpload} class={UploadImageButtonCss} disabled={isUplaodButtonDisabled}>
              <img src={upload} width="48px" height="39px" />
              <h3>写真をアップロード</h3>
            </button>
            <input name="vehicleImage" accept=".jpg,.jpeg,.png" type="file" class="file-input"
              onchange={handleFilesChange} />

            <div class={instructionContainerCss}>
              <div>
                <div class="upload-instruction-heading">
                  <img src={error_outline} width="22px" height="22px" />
                  <h3>注意事項</h3>
                </div>
                <div class="upload-instruction-content">
                  <ul>
                    <li>ファイル形式：.jpg/.jpeg/.png </li>
                    <li>一つのファイルが10MBを超えないように </li>
                    <li>最大10枚 </li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </template>
      </div>

      <div class="upload-button-container">
        <button class="upload-button cancel" onclick={handleCancelClick}>キャンセル</button>
        <button class={saveButtonCss} onclick={handleSaveClick} disabled={isButtonDisabled}>保存</button>
      </div>

      <template if:true={saveLoader}>
        <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
      </template>
    </div>
  </div>
</template>