<template>
  <div class="main-container">
    <template if:true={FinalMainLoader}>
      <div
        style="
          width: 100%;
          height: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
        "
      >
        <lightning-spinner
          alternative-text="Loading"
          size="small"
        ></lightning-spinner>
      </div>
    </template>
    <template if:true={isStep1}>
      <div class="input-container-one">
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_maintenance_type}
            <span class="reqtxt">{labels2.ccp2_ch_required}</span>
          </div>
          <div class="dropdown-type">
            <input
              type="text"
              onclick={handleScheduleTypeChange}
              autocomplete="off"
              class="InputsScheduleType Inputs1 icon2"
              placeholder={labels2.ccp2_ch_select}
              value={selectedPicklistScheduleType}
              name="ScheduleType"
              img
              src={dropdown}
              readonly
            />
            <template if:true={showlistScheduleType}>
              <div
                class="listScheduleType lists2 no-scroll"
                name="ScheduleType"
                onclick={handleInsideClick}
              >
                <template for:each={serviceTypeOptions} for:item="sch">
                  <div
                    key={sch.value}
                    class="list-item"
                    onclick={handlePickListChange}
                    data-namee="ScheduleType"
                    data-idd={sch.value}
                  >
                    <p data-namee="ScheduleType" data-idd={sch.value}>
                      {sch.label}
                    </p>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </div>
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_scheduled_date}
            <span class="reqtxt">{labels2.ccp2_ch_required}</span>
          </div>
          <div class="dropdown-type">
            <div class="icon-calendar2">
              <input
                class="custom-input2"
                value={selectedDateRange2}
                readonly
                onclick={openCalendar2}
                placeholder={labels2.ccp2_ch_select}
                disabled={disablecalendar2}
              />
              <template if:false={disablecalendar2}>
                <span class="svg-container10" onclick={openCalendar2}>
                  <svg
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    onclick={openCalendar2}
                  >
                    <path
                      d="M19.5 4H18.5V2H16.5V4H8.5V2H6.5V4H5.5C4.39 4 3.51 4.9 3.51 6L3.5 20C3.5 21.1 4.39 22 5.5 22H19.5C20.6 22 21.5 21.1 21.5 20V6C21.5 4.9 20.6 4 19.5 4ZM19.5 20H5.5V10H19.5V20ZM19.5 8H5.5V6H19.5V8ZM9.5 14H7.5V12H9.5V14ZM13.5 14H11.5V12H13.5V14ZM17.5 14H15.5V12H17.5V14ZM9.5 18H7.5V16H9.5V18ZM13.5 18H11.5V16H13.5V18ZM17.5 18H15.5V16H17.5V18Z"
                      fill="#7B7B7B"
                    />
                  </svg>
                </span>
              </template>
              <template if:true={disablecalendar2}>
                <span class="svg-container10">
                  <svg
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M19.5 4H18.5V2H16.5V4H8.5V2H6.5V4H5.5C4.39 4 3.51 4.9 3.51 6L3.5 20C3.5 21.1 4.39 22 5.5 22H19.5C20.6 22 21.5 21.1 21.5 20V6C21.5 4.9 20.6 4 19.5 4ZM19.5 20H5.5V10H19.5V20ZM19.5 8H5.5V6H19.5V8ZM9.5 14H7.5V12H9.5V14ZM13.5 14H11.5V12H13.5V14ZM17.5 14H15.5V12H17.5V14ZM9.5 18H7.5V16H9.5V18ZM13.5 18H11.5V16H13.5V18ZM17.5 18H15.5V16H17.5V18Z"
                      fill="#7B7B7B"
                    />
                  </svg>
                </span>
              </template>
            </div>
            <template if:true={isCalendarOpen2}>
              <div class="calendar-popup2" onclick={handleInsideClick2}>
                <div class="calendar-header2">
                  <div>
                    <button class="button-disable2" disabled={isPrevDisabled2}>
                      <lightning-icon
                        class="nav-button2 prev-button2"
                        icon-name="utility:chevronleft"
                        alternative-text="Previous Month"
                        onclick={goToPreviousMonth2}
                        size="xx-small"
                      ></lightning-icon>
                    </button>
                    <span class="calendar-month2">{monthLabel2}</span>
                    <button
                      class="button-disable2"
                      disabled={isNextMonthDisabled2}
                    >
                      <lightning-icon
                        class="nav-button2 next-button2"
                        icon-name="utility:chevronright"
                        alternative-text="Next Month"
                        onclick={goToNextMonth2}
                        size="xx-small"
                      ></lightning-icon>
                    </button>
                  </div>
                  <div style="display: flex; gap: 2px">
                    <!-- /* Last Modified by Singh Jashanpreet */ -->
                    <button
                      disabled={isPrevYearDisabled2}
                      class="prev-year"
                      style="
                        background: transparent;
                        border: none;
                        display: flex;
                        align-items: center;
                        margin-top: 4px;
                      "
                    >
                      <lightning-icon
                        onclick={prevYear2}
                        class="prev-year-icon"
                        icon-name="utility:chevronleft"
                        alternative-text="Back"
                        size="xx-small"
                      ></lightning-icon>
                    </button>
                    <span class="calendar-year2">{reiwaYear2}</span>
                    <span
                      class="calendar-year2"
                      style="
                        display: flex;
                        gap: 2px;
                        align-items: center;
                        color: #7b7b7b;
                      "
                      >{year2}
                      <button
                          class="next-year"
                          style="
                            background: transparent;
                            border: none;
                            display: flex;
                            align-items: center;
                          "
                        >
                          <lightning-icon
                            onclick={nextyear2}
                            class="next-year-icon"
                            icon-name="utility:chevronright"
                            alternative-text="Next"
                            size="xx-small"
                          >
                          </lightning-icon>
                        </button>
                      <!-- <svg
                        style="cursor: pointer"
                        onclick={nextyear2}
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <g clip-path="url(#clip0_26608_105781)">
                          <g filter="url(#filter0_d_26608_105781)">
                            <path
                              d="M6.90284 2.5L5 4.2625L11.1808 10L5 15.7375L6.90284 17.5L15 10L6.90284 2.5Z"
                              fill="#7B7B7B"
                            />
                          </g>
                        </g>
                        <defs>
                          <filter
                            id="filter0_d_26608_105781"
                            x="-15"
                            y="-17.5"
                            width="50"
                            height="55"
                            filterUnits="userSpaceOnUse"
                            color-interpolation-filters="sRGB"
                          >
                            <feFlood
                              flood-opacity="0"
                              result="BackgroundImageFix"
                            />
                            <feColorMatrix
                              in="SourceAlpha"
                              type="matrix"
                              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                              result="hardAlpha"
                            />
                            <feOffset />
                            <feGaussianBlur stdDeviation="10" />
                            <feComposite in2="hardAlpha" operator="out" />
                            <feColorMatrix
                              type="matrix"
                              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
                            />
                            <feBlend
                              mode="normal"
                              in2="BackgroundImageFix"
                              result="effect1_dropShadow_26608_105781"
                            />
                            <feBlend
                              mode="normal"
                              in="SourceGraphic"
                              in2="effect1_dropShadow_26608_105781"
                              result="shape"
                            />
                          </filter>
                          <clipPath id="clip0_26608_105781">
                            <rect
                              width="20"
                              height="20"
                              fill="white"
                              transform="translate(0 20) rotate(-90)"
                            />
                          </clipPath>
                        </defs>
                      </svg> -->
                    </span>
                  </div>
                </div>
                <div class="calendar-days-row2">
                  <div class="day-label2">{labels2.ccp2_ch_sunday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_monday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_tuesday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_wednesday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_thursday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_friday}</div>
                  <div class="day-label2">{labels2.ccp2_ch_saturday}</div>
                </div>
                <div class="calendar-dates-grid2">
                  <template for:each={calendarDates2} for:item="day">
                    <button
                      key={day.value}
                      class={day.className}
                      data-day={day.value}
                      data-month={month2}
                      data-year={year2}
                      onclick={selectDate2}
                      disabled={day.isDisabled}
                    >
                      {day.value}
                    </button>
                  </template>
                </div>
                <div class="calendar-footer2">
                  <div class="reset-button2" onclick={resetDate2}>
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M11 20.95C8.98333 20.7 7.3125 19.8208 5.9875 18.3125C4.6625 16.8042 4 15.0333 4 13C4 11.9 4.21667 10.8458 4.65 9.8375C5.08333 8.82917 5.7 7.95 6.5 7.2L7.925 8.625C7.29167 9.19167 6.8125 9.85 6.4875 10.6C6.1625 11.35 6 12.15 6 13C6 14.4667 6.46667 15.7625 7.4 16.8875C8.33333 18.0125 9.53333 18.7 11 18.95V20.95ZM13 20.95V18.95C14.45 18.6833 15.6458 17.9917 16.5875 16.875C17.5292 15.7583 18 14.4667 18 13C18 11.3333 17.4167 9.91667 16.25 8.75C15.0833 7.58333 13.6667 7 12 7H11.925L13.025 8.1L11.625 9.5L8.125 6L11.625 2.5L13.025 3.9L11.925 5H12C14.2333 5 16.125 5.775 17.675 7.325C19.225 8.875 20 10.7667 20 13C20 15.0167 19.3375 16.7792 18.0125 18.2875C16.6875 19.7958 15.0167 20.6833 13 20.95Z"
                        fill="#262626"
                      />
                    </svg>
                    <p>{labels2.ccp2_ch_reset}</p>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_execution_date}
            <span class="greytxt">{labels2.ccp2_ch_optional}</span>
          </div>
          <div class="dropdown-type">
            <div class="icon-calendar">
              <input
                class="custom-input"
                value={selectedDate}
                readonly
                onclick={openCalendar}
                placeholder={labels2.ccp2_ch_select}
                disabled={disablecalendar1}
              />
              <template if:false={disablecalendar1}>
                <span class="svg-container" onclick={openCalendar}>
                  <svg
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    onclick={openCalendar}
                  >
                    <path
                      d="M19.5 4H18.5V2H16.5V4H8.5V2H6.5V4H5.5C4.39 4 3.51 4.9 3.51 6L3.5 20C3.5 21.1 4.39 22 5.5 22H19.5C20.6 22 21.5 21.1 21.5 20V6C21.5 4.9 20.6 4 19.5 4ZM19.5 20H5.5V10H19.5V20ZM19.5 8H5.5V6H19.5V8ZM9.5 14H7.5V12H9.5V14ZM13.5 14H11.5V12H13.5V14ZM17.5 14H15.5V12H17.5V14ZM9.5 18H7.5V16H9.5V18ZM13.5 18H11.5V16H13.5V18ZM17.5 18H15.5V16H17.5V18Z"
                      fill="#7B7B7B"
                    />
                  </svg>
                </span>
              </template>
              <template if:true={disablecalendar1}>
                <span class="svg-container">
                  <svg
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    onclick={openCalendar}
                  >
                    <path
                      d="M19.5 4H18.5V2H16.5V4H8.5V2H6.5V4H5.5C4.39 4 3.51 4.9 3.51 6L3.5 20C3.5 21.1 4.39 22 5.5 22H19.5C20.6 22 21.5 21.1 21.5 20V6C21.5 4.9 20.6 4 19.5 4ZM19.5 20H5.5V10H19.5V20ZM19.5 8H5.5V6H19.5V8ZM9.5 14H7.5V12H9.5V14ZM13.5 14H11.5V12H13.5V14ZM17.5 14H15.5V12H17.5V14ZM9.5 18H7.5V16H9.5V18ZM13.5 18H11.5V16H13.5V18ZM17.5 18H15.5V16H17.5V18Z"
                      fill="#7B7B7B"
                    />
                  </svg>
                </span>
              </template>
            </div>
            <template if:true={isCalendarOpen}>
              <div class="calendar-popup" onclick={handleInsideClick}>
                <div class="calendar-header">
                  <div>
                    <button class="button-disable">
                      <lightning-icon
                        class="nav-button prev-button"
                        icon-name="utility:chevronleft"
                        alternative-text="Previous Month"
                        onclick={goToPreviousMonth}
                        size="xx-small"
                      >
                      </lightning-icon>
                    </button>
                    <span class="calendar-month">{monthLabel}</span>
                    <button
                      class="button-disable"
                      disabled={isNextMonthDisabled}
                    >
                      <lightning-icon
                        class="nav-button next-button"
                        icon-name="utility:chevronright"
                        alternative-text="Next Month"
                        onclick={goToNextMonth}
                        size="xx-small"
                      >
                      </lightning-icon>
                    </button>
                  </div>
                  <div style="display: flex; gap: 12px">

                    <button class="prev-year"
                        style="background: transparent; border: none; display: flex; align-items:center;">
                        <lightning-icon onclick={prevYear} class="prev-year-icon"
                           icon-name="utility:chevronleft" alternative-text="Back"
                           size="xx-small"></lightning-icon>
                    </button>

                    <span class="calendar-year">{era}</span>
                    <span class="calendar-year"
                      >{year}</span
                    >

                    <button disabled={isNextYearDisabled} class="next-year"
                      style="background: transparent; border: none; display: flex; align-items:center;">
                      <lightning-icon onclick={nextyear} class="next-year-icon"
                          icon-name="utility:chevronright" alternative-text="Next"
                          size="xx-small">
                      </lightning-icon>
                    </button>

                  </div>
                </div>

                <div class="calendar-days-row">
                  <div class="day-label">{labels2.ccp2_ch_sunday}</div>
                  <div class="day-label">{labels2.ccp2_ch_monday}</div>
                  <div class="day-label">{labels2.ccp2_ch_tuesday}</div>
                  <div class="day-label">{labels2.ccp2_ch_wednesday}</div>
                  <div class="day-label">{labels2.ccp2_ch_thursday}</div>
                  <div class="day-label">{labels2.ccp2_ch_friday}</div>
                  <div class="day-label">{labels2.ccp2_ch_saturday}</div>
                </div>

                <div class="calendar-dates-grid">
                  <template for:each={calendarDates} for:item="day">
                    <button
                      key={day.value}
                      class={day.className}
                      data-day={day.value}
                      onclick={selectDate}
                      disabled={day.isDisabled}
                    >
                      {day.value}
                    </button>
                  </template>
                </div>

                <div class="calendar-footer">
                  <div class="reset-button" onclick={resetDate}>
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M11 20.95C8.98333 20.7 7.3125 19.8208 5.9875 18.3125C4.6625 16.8042 4 15.0333 4 13C4 11.9 4.21667 10.8458 4.65 9.8375C5.08333 8.82917 5.7 7.95 6.5 7.2L7.925 8.625C7.29167 9.19167 6.8125 9.85 6.4875 10.6C6.1625 11.35 6 12.15 6 13C6 14.4667 6.46667 15.7625 7.4 16.8875C8.33333 18.0125 9.53333 18.7 11 18.95V20.95ZM13 20.95V18.95C14.45 18.6833 15.6458 17.9917 16.5875 16.875C17.5292 15.7583 18 14.4667 18 13C18 11.3333 17.4167 9.91667 16.25 8.75C15.0833 7.58333 13.6667 7 12 7H11.925L13.025 8.1L11.625 9.5L8.125 6L11.625 2.5L13.025 3.9L11.925 5H12C14.2333 5 16.125 5.775 17.675 7.325C19.225 8.875 20 10.7667 20 13C20 15.0167 19.3375 16.7792 18.0125 18.2875C16.6875 19.7958 15.0167 20.6833 13 20.95Z"
                        fill="#262626"
                      />
                    </svg>
                    <p>{labels2.ccp2_ch_reset}</p>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_entry_category}
            <span class="reqtxt">{labels2.ccp2_ch_required}</span>
          </div>
          <div class="dropdown-type-factory">
            <input
              type="text"
              onclick={handlefactoryTypeChange}
              autocomplete="off"
              class="InputsScheduleType Inputs1 icon2"
              placeholder={labels2.ccp2_ch_select}
              value={selectedPicklistfactoryType}
              name="factoryType"
              img
              src={dropdown}
              readonly
            />
            <template if:true={showlistfactoryType}>
              <div class="listScheduleType lists2 no-scroll" name="factoryType">
                <template for:each={serviceFactoryOptions} for:item="fact">
                  <div
                    key={fact.value}
                    class="list-item"
                    onclick={handlePickListChangefactory}
                    data-namee="scheduleFact"
                    data-idd={fact.value}
                  >
                    <p data-namee="scheduleFact" data-idd={fact.value}>
                      {fact.label}
                    </p>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </div>
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_entry_location}
            <template if:true={isFusoselected}>
              <span class="reqtxt">{labels2.ccp2_ch_required}</span>
            </template>
            <template if:false={isFusoselected}>
              <span class="greytxt">{labels2.ccp2_ch_optional}</span>
            </template>
          </div>
          <template if:true={BranchSearchList}>
            <div class="destination-receive">
              <input
                type="text"
                class="listScheduleTypeFact Inputs1 icon2"
                placeholder={labels2.ccp2_ch_select}
                onclick={handleBranchListclick}
                value={destinationAccountBranchToShow}
                disabled={isDisabled}
                readonly
              />
              <template if:true={showBranchlist}>
                <div
                  class="listScheduleType lists2 no-scroll"
                  name="ScheduleType"
                  onclick={handleInsideClick}
                >
                  <div class="scrollbar2">
                    <div class="list-item" onclick={handleNone}>
                      {labels2.ccp2_ch_no_selection}
                    </div>
                    <template for:each={branchList} for:item="bran">
                      <div
                        key={bran.id}
                        class="list-item"
                        onclick={handlebranchNameClick}
                        data-namee={bran.name}
                        data-idd={bran.id}
                      >
                        <p data-namee={bran.name} data-idd={bran.id}>
                          {bran.name}
                        </p>
                      </div>
                    </template>
                  </div>
                </div>
              </template>
            </div>
          </template>
          <template if:true={AccountSearchList}>
            <div class="destination-receive">
              <div class="search-container">
                <span class="svg-container2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                  >
                    <path
                      d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                      fill="#262626"
                    />
                  </svg>
                </span>
                <template if:true={divforAccountAddress}>
                  <div class="selected-account">
                    <span class="ellipsess">
                      {destinationAccountBranchToShow}
                    </span>
                    <span class="address-bottom">
                      {postCode} {perfecturess}{municipality}{street}
                    </span>
                  </div>
                </template>
                <template if:false={divforAccountAddress}>
                  <input
                    type="text"
                    placeholder={labels2.ccp2_ch_search_company_name}
                    class="InputsScheduleTypeSearch2"
                    value={searchKey}
                    oninput={handleSearchAccount}
                    onkeydown={handleKeyDown}
                    readonly={readonlyaccount}
                  />
                </template>
                <template if:true={searchKeyPresent}>
                  <span class="svg-container" onclick={handleRemovesearchKey}>
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      onclick={handleRemovesearchKey}
                    >
                      <path
                        d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
                        fill="black"
                      />
                    </svg>
                  </span>
                </template>
              </div>

              <div class={searchlistClass}>
                <div class="searchlist">
                  <template if:true={showMorelist}>
                    <div class="show-more" onclick={handleShowMoreCLick}>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="25"
                        height="24"
                        viewBox="0 0 25 24"
                        fill="none"
                      >
                        <path
                          d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                          fill="#262626"
                        />
                      </svg>
                      <p class="ellipsess">
                        {searchKey} {labels2.ccp2_ch_show_more_results}
                      </p>
                      <!-- <svg onclick={handleremoveShowmore} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: auto;">
                                                                <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="black"/>
                                                            </svg> -->
                    </div>
                  </template>
                  <template if:true={searchArrayaccount}>
                    <template for:each={searchArrayaccount} for:item="account">
                      <div
                        key={account.id}
                        onclick={handleAccountClick}
                        data-namee={account.name}
                        data-postal={account.ShippingPostalCode}
                        data-mun={account.shippingAdd.municipality}
                        data-prefect={account.shippingAdd.prefect}
                        data-street={account.shippingAdd.street}
                        data-idd={account.id}
                        class="searchItems"
                      >
                        <p
                          onclick={handleAccountClick}
                          data-namee={account.name}
                          data-postal={account.ShippingPostalCode}
                          data-mun={account.shippingAdd.municipality}
                          data-street={account.shippingAdd.street}
                          data-prefect={account.shippingAdd.prefect}
                          data-idd={account.id}
                          class="ellipsess"
                        >
                          {account.name}
                        </p>
                        <template if:true={account.Address}>
                          <div
                            style="color: #7b7b7b"
                            class="ellipsess"
                            data-namee={account.name}
                            data-postal={account.ShippingPostalCode}
                            data-street={account.shippingAdd.street}
                            data-mun={account.shippingAdd.municipality}
                            data-prefect={account.shippingAdd.prefect}
                            data-idd={account.id}
                          >
                            <!-- {account.shippingAdd.PostalCode}
                            {account.shippingAdd.prefect}
                            {account.shippingAdd.municipality}
                            {account.shippingAdd.street} -->
                            {account.Address}
                          </div>
                        </template>
                        <template if:false={account.Address}> </template>
                      </div>
                    </template>
                  </template>
                </div>
              </div>
              <template if:true={searchAccountError}>
                <p class="errortxt">{labels2.ccp2_ch_dropdown_search_clear}</p>
              </template>
            </div>
          </template>
          <template if:true={FusoSearchList}>
            <div class="destination-receive">
              <div class="search-container">
                <span class="svg-container2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="24"
                    viewBox="0 0 25 24"
                    fill="none"
                  >
                    <path
                      d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                      fill="#262626"
                    />
                  </svg>
                </span>
                <template if:true={divforFusoAddress}>
                  <div class="selected-account">
                    <span class="ellipsess"> {destinationFuso} </span>
                    <span class="address-bottom">
                      {cityfuso} {addressfuso}
                    </span>
                  </div>
                </template>
                <template if:false={divforFusoAddress}>
                  <input
                    type="text"
                    placeholder={labels2.ccp2_ch_fusoplaceholder}
                    class="InputsScheduleTypeSearch"
                    value={FusoKey}
                    oninput={handleSearchFuso}
                    onkeydown={handleKeyDown}
                    readonly={readonlyFuso}
                  />
                </template>
                <template if:true={searchKeyPresentFuso}>
                  <span
                    class="svg-container"
                    onclick={handleRemovesearchKeyFuso}
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                      onclick={handleRemovesearchKeyFuso}
                    >
                      <path
                        d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
                        fill="black"
                      />
                    </svg>
                  </span>
                </template>
              </div>

              <div class={searchlistClassFuso}>
                <div class="searchlist">
                  <template if:true={showMorelistFuso}>
                    <div class="show-more" onclick={handleShowMoreCLickFuso}>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="25"
                        height="24"
                        viewBox="0 0 25 24"
                        fill="none"
                      >
                        <path
                          d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                          fill="#262626"
                        />
                      </svg>
                      <p class="ellipsess">
                        {FusoKey} {labels2.ccp2_ch_show_more_results}
                      </p>
                      <!-- <svg onclick={handleremoveShowmore} width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: auto;">
                                                          <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="black"/>
                                                      </svg> -->
                    </div>
                  </template>
                  <template if:true={searchArrayFuso}>
                    <template for:each={searchArrayFuso} for:item="account">
                      <div
                        key={account.id}
                        onclick={handleFusoClick}
                        data-namee={account.name}
                        data-address={account.address}
                        data-city={account.city}
                        data-idd={account.id}
                        class="searchItems"
                      >
                        <p
                          onclick={handleFusoClick}
                          data-namee={account.name}
                          data-address={account.address}
                          data-city={account.city}
                          data-idd={account.id}
                          class="ellipsess"
                        >
                          {account.name}
                        </p>
                        <template if:true={account.hasAddress}>
                          <div
                            style="color: #7b7b7b"
                            class="ellipsess"
                            data-namee={account.name}
                            data-address={account.address}
                            onclick={handleFusoClick}
                            data-city={account.city}
                            data-idd={account.id}
                          >
                            {account.prefectures} {account.city}
                            {account.address}
                          </div>
                        </template>
                        <template if:false={account.hasAddress}> </template>
                      </div>
                    </template>
                  </template>
                </div>
              </div>
              <template if:true={searchFusoError}>
                <p class="errortxt">{labels2.ccp2_ch_dropdown_search_clear}</p>
              </template>
            </div>
          </template>
        </div>
        <div class="input-container-record">
          <div class="ScheduleType">
            {labels2.ccp2_ch_entry_location_other}
            <span class="greytxt">{labels2.ccp2_ch_optional}</span>
          </div>
          <div class="input-receiving-dest">
            <input
              type="text"
              class="listScheduleTypeRec"
              value={destinationNosearch}
              placeholder={labels2.ccp2_ch_input_entry_location}
              oninput={handlevalchange}
              disabled={isDisabled}
              onchange={handleDestinationType}
              maxlength="30"
            />
          </div>
        </div>
      </div>
      <div class="input-container-two">
        <div class="rich-input">
          <div class="header-rich">
            <div class="header-rich1">{labels2.ccp2_ch_execution_notes}</div>
            <div class="greytxt">{labels2.ccp2_ch_optional}</div>
          </div>
          <lightning-input-rich-text
            formats={allowedFormats}
            value={richTextVal}
            valid={validity}
            class="custom-rich-text"
            onchange={handleRichTextChange}
            style="
              --lwc-brandAccessible: #e10202;
              --lwc-brandAccessibleActive: #e10202;
              --slds-g-color-border-base-4: #d9d9d9;
              --slds-g-shadow-outset-focus-1: white;
              --slds-g-shadow-outline-focus-1: white;
              width: 680px;
            "
          >
            <lightning-rich-text-toolbar-button-group>
              <lightning-rich-text-toolbar-button
                icon-name="utility:insert_photo"
                label="Insert Image"
                onclick={handleInsertImage}
              >
              </lightning-rich-text-toolbar-button>
            </lightning-rich-text-toolbar-button-group>
          </lightning-input-rich-text>
        </div>
        <div class="record-vertical">
          <div class="image-uploader-container">
            <div class="header-rich">
              <h2 class="header-rich1">{labels2.ccp2_ch_attachment_photos}</h2>
              <div class="greytxt">{labels2.ccp2_ch_optional}</div>
            </div>
            <div style="display: flex; gap: 15px">
              <div class="image-uploader">
                <svg
                  width="47"
                  height="32"
                  viewBox="0 0 47 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12.9366 31.0938C10.0509 30.9234 7.30895 30.056 5.1023 28.6155C2.89565 27.1749 1.33714 25.235 0.6493 23.0726C-0.0385357 20.9101 0.179476 18.6358 1.2722 16.5744C2.36493 14.513 4.27651 12.7698 6.73397 11.5938C7.25687 8.4577 9.24757 5.57562 12.3335 3.48693C15.4195 1.39825 19.3892 0.246094 23.4998 0.246094C27.6104 0.246094 31.5801 1.39825 34.666 3.48693C37.752 5.57562 39.7427 8.4577 40.2656 11.5938C42.7231 12.7698 44.6346 14.513 45.7274 16.5744C46.8201 18.6358 47.0381 20.9101 46.3503 23.0726C45.6624 25.235 44.1039 27.1749 41.8973 28.6155C39.6906 30.056 36.9487 30.9234 34.0629 31.0938V31.1247H12.9366V31.0938ZM25.6124 18.1247H31.9503L23.4998 9.99968L15.0493 18.1247H21.3872V24.6247H25.6124V18.1247Z"
                    fill="#E10202"
                  />
                </svg>
                <p>{labels2.ccp2_ch_upload_file}</p>
                <input
                  type="file"
                  accept=".jpg,.jpeg,.png"
                  multiple
                  title=" "
                  onchange={handleFilesChange}
                  disabled={disableInput}
                  class="image-uploader-input"
                />
              </div>
              <div class="guidelines-img">
                <div class="precautions">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="22"
                    height="23"
                    viewBox="0 0 22 23"
                    fill="none"
                  >
                    <path
                      d="M10.0859 13.7005C10.0859 13.1943 10.4963 12.7839 11.0026 12.7839C11.5089 12.7839 11.9193 13.1943 11.9193 13.7005V14.7005C11.9193 15.2068 11.5089 15.6172 11.0026 15.6172C10.4963 15.6172 10.0859 15.2068 10.0859 14.7005V13.7005ZM10.0859 7.36719C10.0859 6.86093 10.4963 6.45052 11.0026 6.45052C11.5089 6.45052 11.9193 6.86093 11.9193 7.36719V11.0339C11.9193 11.5401 11.5089 11.9505 11.0026 11.9505C10.4963 11.9505 10.0859 11.5401 10.0859 11.0339V7.36719ZM10.9934 1.86719C5.93344 1.86719 1.83594 5.97385 1.83594 11.0339C1.83594 16.0939 5.93344 20.2005 10.9934 20.2005C16.0626 20.2005 20.1693 16.0939 20.1693 11.0339C20.1693 5.97385 16.0626 1.86719 10.9934 1.86719ZM11.0026 18.3672C6.95094 18.3672 3.66927 15.0855 3.66927 11.0339C3.66927 6.98219 6.95094 3.70052 11.0026 3.70052C15.0543 3.70052 18.3359 6.98219 18.3359 11.0339C18.3359 15.0855 15.0543 18.3672 11.0026 18.3672Z"
                      fill="#E10202"
                    />
                  </svg>
                  <p style="font-size: 14px">{labels2.ccp2_ch_caution}</p>
                </div>
                <div class="list-precautions">
                  <li>{labels2.ccp2_ch_file_format_info}</li>
                  <li>{labels2.ccp2_ch_max_file_size}</li>
                  <li>{labels2.ccp2_ch_max_files_limit}</li>
                </div>
              </div>
            </div>
          </div>
          <div class="image-preview">
            <div class="photocard">
              <template for:each={imageList} for:item="image">
                <div key={image.id} class="image-container">
                  <template if:true={image.isloadingImages}>
                    <div class="loader-img-dev">
                      <div class="loaderimages"></div>
                    </div>
                  </template>
                  <img
                    src={image.src}
                    alt={image.name}
                    class="image-preview__img"
                  />
                  <div class="remove-main">
                    <p
                      class="name"
                      style="font-size: 10px; color: white"
                      title={image.name}
                    >
                      {image.halfName}
                    </p>
                    <button
                      class="remove-button"
                      onclick={opencancelimagemodal}
                      data-id={image.recordId}
                    >
                      &times;
                    </button>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </div>
      <div class="input-container-buttons">
        <button class="cancel-btn2" onclick={handleConfirmmodal}>
          {labels2.ccp2_ch_cancel2}
        </button>
        <button class="next-btn1" onclick={handleclick1} disabled={reqFields}>
          {labels2.ccp2_ch_next2}
        </button>
      </div>
    </template>
    <template if:false={isStep1}>
      <template if:true={isHistory}>
        <div class="main-div-final">
          <div class="history-reg">
            <p>{labels2.ccp2_ch_back_historyReg}</p>
            <!-- <p>お客様の整備履歴が登録されました。</p> -->
          </div>
          <button class="final-button" onclick={onClose}>
            {labels2.ccp2_ch_back_to_calendar_new}
          </button>
        </div>
      </template>
      <template if:false={isHistory}>
        <div class="main-div-final">
          <div class="final-text-container">
            <template if:true={showPoster1}>
              <P class="final-text">{labels2.ccp2_ch_backregCompp}</P>
            </template>
            <template if:true={showPoster2}>
              <P class="final-text"
                >​{labels2.ccp2_ch_registration_complete_new}​</P
              >
              <P class="final-text">{labels2.ccp2_ch_search_parts_new}​</P>
            </template>
          </div>
          <template if:true={showPoster1}>
            <div class="poster2main">
              <img
                src={poster1}
                onclick={openlink}
                alt="fuso shop"
                class="poster-Image-Blank-No-Component"
              />
            </div>
          </template>
          <template if:true={showPoster2}>
            <div class="poster">
              <img src={poster2} alt="fuso shop" class="poster-Image-Blank" />
              <div class="components-container">
                <template for:each={vehicleImages} for:item="image">
                  <div key={image.name} class="image-container">
                    <div
                      class="overlay"
                      data-name={image.name}
                      onclick={handleImageClick}
                    >
                      <p class="overlay-text">{image.code}</p>
                      <p class="overlay-text">>></p>
                      <img
                        src={logoafter}
                        alt="logo Image"
                        class="overlay-image"
                      />
                    </div>
                    <div class="card-poster">
                      <img
                        src={image.imageUrl}
                        alt={image.name}
                        data-name={image.name}
                        class="component-image"
                      />
                      <p class="text">{image.code}</p>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </template>
          <button class="final-button" onclick={onClose}>
            {labels2.ccp2_ch_back_to_calendar_new}
          </button>
        </div>
      </template>
    </template>
  </div>
  <template if:true={exitModal}>
    <div class="modal-background-last">
      <div class="modal-window-small">
        <div class="warning-modal">
          <p class="warntxt">{labels2.ccp2_ch_registration_incomplete}</p>
          <p class="warntxt more">{labels2.ccp2_ch_confirm_cancel}</p>
        </div>
        <div class="buttons-small">
          <button class="cancel-btn1" onclick={handleconfirmNo}>
            {labels2.ccp2_ch_no}
          </button>
          <div class="searchbutton btn" onclick={onClose}>
            <p class="buttontxt2">{labels2.ccp2_ch_yes}</p>
          </div>
        </div>
      </div>
    </div>
  </template>
  <template if:true={showMore}>
    <div class="modal-background-last">
      <div class="modal-showmore">
        <div class="warning-showmore">
          <p class="header-search-modal">{labels2.ccp2_ch_search}</p>
          <input
            type="text"
            class="InputsScheduleTypesshowmore"
            value={searchKey}
            oninput={handlesearchAccount2}
            placeholder={labels2.ccp2_ch_search_company_name}
          />
          <span class="svg-container3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="21"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                fill="#262626"
              />
            </svg>
          </span>
          <div class="paddingscrollshow">
            <div class="showmoreAccount">
              <template if:true={showmorelength}>
                <template for:each={showmoreArray} for:item="item">
                  <div
                    key={item.id}
                    onclick={handleAccountClick}
                    data-namee={item.name}
                    data-idd={item.id}
                    data-postal={item.shippingAdd.PostalCode}
                    data-mun={item.shippingAdd.municipality}
                    data-prefect={item.shippingAdd.prefect}
                    class="searchItemsShowmore"
                  >
                    <div
                      class="showmoreName"
                      data-namee={item.name}
                      onclick={handleAccountClick}
                      data-idd={item.id}
                      data-street={item.shippingAdd.street}
                      data-postal={item.shippingAdd.PostalCode}
                      data-mun={item.shippingAdd.municipality}
                      data-prefect={item.shippingAdd.prefect}
                    >
                      {item.name}
                    </div>
                    <div
                      class="showmoreAddress"
                      data-namee={item.name}
                      onclick={handleAccountClick}
                      data-idd={item.id}
                      data-postal={item.shippingAdd.PostalCode}
                      data-mun={item.shippingAdd.municipality}
                      data-street={item.shippingAdd.street}
                      data-prefect={item.shippingAdd.prefect}
                    >
                      {item.shippingAdd.PostalCode}
                      {item.shippingAdd.prefect} {item.shippingAdd.municipality}
                      {item.shippingAdd.street}
                    </div>
                  </div>
                </template>
              </template>
            </div>
            <template if:false={showmorelength}>
              <div class="nosearchImg">
                <img src={nosearch} alt="No Search" />
                <p>{labels2.ccp2_ch_no_results_found}</p>
              </div>
            </template>
          </div>
        </div>
        <div class="buttons-small-search">
          <button class="cancel-btn1" onclick={handlesearchCancel}>
            {labels2.ccp2_ch_cancel}
          </button>
        </div>
      </div>
    </div>
  </template>
  <template if:true={showcancelimageModal}>
    <div class="modal-background-last5">
      <div class="modal-window-small5">
        <div class="Delete-name-container5" style="min-height: 100px">
          <h3>{labels2.ccp2_ch_confirm_delete}</h3>
        </div>
        <div class="buttons-small5">
          <div
            class="cancelbutton-download5 btn-download5"
            onclick={handleimageNo}
          >
            <p class="buttontxt5">{labels2.ccp2_ch_no}</p>
          </div>
          <div
            class="searchbutton-download5 btn-download5"
            onclick={handleimageYes}
          >
            <p class="buttontxt6">{labels2.ccp2_ch_yes}</p>
          </div>
        </div>
      </div>
    </div>
  </template>
  <template if:true={multipleDest}>
    <div class="modal-background-last">
      <div class="modal-window-small">
        <div class="warning-modal">
          <p class="warntxt">{labels2.ccp2_ch_multiple_entry_locations}</p>
          <p class="warntxt more">
            {labels2.ccp2_ch_multiple_entry_locations2}
          </p>
        </div>
        <div class="buttons-small">
          <div class="searchbutton btn" onclick={handleOk}>
            <p class="buttontxt2">{labels2.ccp2_ch_yes}</p>
          </div>
        </div>
      </div>
    </div>
  </template>
  <template if:true={showmoreofFuso}>
    <div class="modal-background-last">
      <div class="modal-showmore">
        <div class="warning-showmore">
          <p class="header-search-modal">{labels2.ccp2_ch_search}</p>
          <input
            type="text"
            class="InputsScheduleTypesshowmore"
            value={FusoKey}
            oninput={handlesearchFuso2}
            placeholder={labels2.ccp2_ch_search_company_name}
          />
          <span class="svg-container3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="21"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M16.2559 14.2549H15.4659L15.1859 13.9849C16.1659 12.8449 16.7559 11.3649 16.7559 9.75488C16.7559 6.16488 13.8459 3.25488 10.2559 3.25488C6.66586 3.25488 3.75586 6.16488 3.75586 9.75488C3.75586 13.3449 6.66586 16.2549 10.2559 16.2549C11.8659 16.2549 13.3459 15.6649 14.4859 14.6849L14.7559 14.9649V15.7549L19.7559 20.7449L21.2459 19.2549L16.2559 14.2549ZM10.2559 14.2549C7.76586 14.2549 5.75586 12.2449 5.75586 9.75488C5.75586 7.26488 7.76586 5.25488 10.2559 5.25488C12.7459 5.25488 14.7559 7.26488 14.7559 9.75488C14.7559 12.2449 12.7459 14.2549 10.2559 14.2549Z"
                fill="#262626"
              />
            </svg>
          </span>
          <div class="paddingscrollshow">
            <div class="showmoreAccount">
              <template if:true={showmorelength2}>
                <template for:each={showmoreArray2} for:item="item">
                  <div
                    key={item.id}
                    onclick={handleFusoClick}
                    data-namee={item.name}
                    data-idd={item.id}
                    data-address={item.address}
                    data-city={item.city}
                    class="searchItemsShowmore"
                  >
                    <div
                      class="showmoreName"
                      data-namee={item.name}
                      onclick={handleFusoClick}
                      data-idd={item.id}
                      data-address={item.address}
                      data-city={item.city}
                    >
                      {item.name}
                    </div>
                    <div
                      class="showmoreAddress"
                      data-namee={item.name}
                      onclick={handleFusoClick}
                      data-idd={item.id}
                      data-address={item.address}
                      data-city={item.city}
                    >
                      {item.prefectures} {item.city} {item.address}
                    </div>
                  </div>
                </template>
              </template>
            </div>
            <template if:false={showmorelength2}>
              <div class="nosearchImg">
                <img src={nosearch} alt="No Search" />
                <p>{labels2.ccp2_ch_no_results_found}</p>
              </div>
            </template>
          </div>
        </div>
        <div class="buttons-small-search">
          <button class="cancel-btn1" onclick={handlesearchCancel2}>
            {labels2.ccp2_ch_cancel}
          </button>
        </div>
      </div>
    </div>
  </template>
  <template if:true={isAlreadyHaveMaintenance}>
    <div class="modal-background-last5">
      <div class="modal-window-small-sameIns">
        <div style="display:flex;flex-direction:column;">
          <!-- <p>{labels2.ccp2_ch_sameInsp1}</p>
          <p>{labels2.ccp2_ch_sameInsp2}</p> -->
          <p>{isAlreadyHaveMaintenance}</p>
        </div>
        <button class="back-button" onclick={backfromSameinsp}>{labels2.ccp2_ch_back}</button>
      </div>
    </div>
  </template>
</template>