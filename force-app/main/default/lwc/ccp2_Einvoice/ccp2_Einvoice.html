<template>
  <div class="main">
    <div class="half top">
      <img src={backgroundImagePC} class="main_image" alt="background_Image" />
    </div>
    <div class="half bottom">
      <div class="center-content">
        <div class="main-content">
          <div class="top-div">
            <div class="heading">{labels2.ccp2_ei_monthly_invoice}</div>
            <div class="search-div">
              <div class="inside-search">
                <div class="notification-div">
                  <div style="font-size: 16px; font-weight: 700">
                    {labels2.ccp2_ei_invoice_search}
                  </div>
                  <div class="notif-labels">
                    <div style="display: flex; gap: 4px; align-items: center">
                      <p>{labels2.ccp2_ei_emailNot}</p>
                      <template if:true={emailNotif}>
                        <p class="notif-btn">{labels2.ccp2_cal_notify_onn}</p>
                      </template>
                      <template if:false={emailNotif}>
                        <p class="notif-btn">{labels2.ccp2_cal_notify_off}</p>
                      </template>
                    </div>
                    <p
                      style="
                        color: var(--red-button-alers, #e10202);
                        text-decoration-line: underline;
                        cursor: pointer;
                        margin-right: 6px;
                      "
                      onclick={navigateBasicInfo}
                    >
                      {labels2.ccp2_cal_notify_settings}
                    </p>
                  </div>
                </div>
                <div class="search-content">
                  <div class="search-items">
                    <div class="search-label">
                      {labels2.ccp2_ei_company_name}
                    </div>
                    <div class="search-value">{AccountName}</div>
                  </div>
                  <div class="search-items">
                    <div class="search-label">{labels2.ccp2_ei_invoice_to}</div>
                    <template if:true={hasInvoiceGrp}>
                      <div class="master-dropdown">
                        <div class="dropdown-container">
                          <div class={branchNameclass} onclick={toggleDropdown}>
                            <div class="dropdown-button icon">
                              <template if:true={areanyselected}>
                                <template if:true={areAllSelected}>
                                  <p class="selected-placeholder-val">
                                    {labels2.ccp2_ei_all}
                                  </p>
                                </template>
                                <template if:false={areAllSelected}>
                                  <p class="selected-placeholder-val">
                                    {selectedCount}{labels2.ccp2_ei_selected_items}
                                  </p>
                                </template>
                              </template>
                              <template if:false={areanyselected}>
                                <p class="placeholder-not-sel">
                                  {labels2.ccp2_ei_select}
                                </p>
                              </template>

                              <template if:true={isDropdownOpen}>
                                <div
                                  class="dropdown-content"
                                  onclick={handleInsideClick}
                                >
                                  <div style="margin-bottom: 10px">
                                    <input
                                      type="checkbox"
                                      id="allAccount"
                                      value="all"
                                      checked={isAllAccountsChecked}
                                      onclick={handleSelectAllAccounts}
                                    />
                                    <label class="account-label"
                                      >{labels2.ccp2_ei_all}</label
                                    >
                                  </div>
                                  <template
                                    for:each={accountCheckboxes}
                                    for:item="item"
                                  >
                                    <div
                                      key={item.label}
                                      style="margin-bottom: 10px"
                                    >
                                      <input
                                        type="checkbox"
                                        id={item.label}
                                        name="account"
                                        value={item.label}
                                        checked={item.isChecked}
                                        onclick={handleCheckboxChange}
                                      />
                                      <label class="account-label">
                                        {item.label}
                                      </label>
                                    </div>
                                  </template>
                                </div>
                              </template>
                            </div>
                          </div>
                        </div>
                        <template if:true={branchNameError}>
                          <p class="error-text">
                            {labels2.ccp2_ei_select_document_name}
                          </p>
                        </template>
                      </div>
                    </template>
                    <template if:false={hasInvoiceGrp}>
                      <div class="search-value">
                        <template
                          for:each={accountsData}
                          for:item="item"
                          if:true={accountsData}
                        >
                          <div key={item.id}>
                            {item.siebelCode} - {item.name}
                          </div>
                        </template>
                      </div>
                    </template>
                  </div>
                  <div class="search-items">
                    <div class="search-label">
                      {labels2.ccp2_ei_invoice_month}
                    </div>
                    <div class="search-value">
                      <div class="left-field-val">
                        <div class="month-year-picker-container">
                          <div class="dropdown-wrapper-date">
                            <div
                              class="dropdown-header-date icon2"
                              onclick={toggleStartDropdown}
                            >
                              <span>{startDateLabel}</span>
                            </div>
                            <div
                              if:true={isStartDropdownOpen}
                              class="dropdown-list-date"
                              onclick={handleInsideClick}
                            >
                              <div class="searchlist">
                                <template
                                  for:each={startMonthOptions}
                                  for:item="option"
                                >
                                  <div
                                    key={option.value}
                                    data-value={option.value}
                                    class={option.cssClass}
                                    onclick={handleStartDateSelect}
                                  >
                                    {option.label}
                                  </div>
                                </template>
                              </div>
                            </div>
                          </div>
                          <p>{labels2.ccp2_ei_from}</p>
                          <div class="dropdown-wrapper-date">
                            <div
                              class="dropdown-header-date icon2"
                              onclick={toggleEndDropdown}
                            >
                              <span>{endDateLabel}</span>
                            </div>
                            <template if:true={isEndDropdownOpen}>
                              <div
                                class="dropdown-list-date"
                                onclick={handleInsideClick}
                              >
                                <div class="searchlist">
                                  <template
                                    for:each={endMonthOptions}
                                    for:item="option"
                                  >
                                    <div
                                      key={option.value}
                                      data-value={option.value}
                                      class={option.cssClass}
                                      onclick={handleEndDateSelect}
                                    >
                                      {option.label}
                                    </div>
                                  </template>
                                </div>
                              </div>
                            </template>
                          </div>
                          <p>{labels2.ccp2_ei_to}</p>
                        </div>
                        <p style="font-size: 14px">
                          {labels2.ccp2_ei_six_months_note}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="footer-buttons">
                  <div onclick={handleReset} style="cursor: pointer">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="25"
                      viewBox="0 0 24 25"
                      fill="none"
                    >
                      <path
                        d="M11 21.4822C8.98333 21.2322 7.3125 20.3531 5.9875 18.8447C4.6625 17.3364 4 15.5656 4 13.5322C4 12.4322 4.21667 11.3781 4.65 10.3697C5.08333 9.36139 5.7 8.48223 6.5 7.73223L7.925 9.15723C7.29167 9.72389 6.8125 10.3822 6.4875 11.1322C6.1625 11.8822 6 12.6822 6 13.5322C6 14.9989 6.46667 16.2947 7.4 17.4197C8.33333 18.5447 9.53333 19.2322 11 19.4822V21.4822ZM13 21.4822V19.4822C14.45 19.2156 15.6458 18.5239 16.5875 17.4072C17.5292 16.2906 18 14.9989 18 13.5322C18 11.8656 17.4167 10.4489 16.25 9.28223C15.0833 8.11556 13.6667 7.53223 12 7.53223H11.925L13.025 8.63223L11.625 10.0322L8.125 6.53223L11.625 3.03223L13.025 4.43223L11.925 5.53223H12C14.2333 5.53223 16.125 6.30723 17.675 7.85723C19.225 9.40723 20 11.2989 20 13.5322C20 15.5489 19.3375 17.3114 18.0125 18.8197C16.6875 20.3281 15.0167 21.2156 13 21.4822Z"
                        fill="#262626"
                      />
                    </svg>
                    {labels2.ccp2_ei_reset}
                  </div>
                  <button class="search-button" onclick={handleSearchclick}>
                    {labels2.ccp2_ei_search}
                  </button>
                </div>
              </div>
              <!-- <div></div> -->
            </div>
          </div>
          <div
            if:true={showSearchPageLoader}
            style="
              position: absolute;
              width: 100%;
              height: 100%;
              display: flex;
              justify-content: center;
              align-items: center;
            "
          >
            <lightning-spinner
              alternative-text="Loading"
              size="small"
            ></lightning-spinner>
          </div>
          <template if:true={dataSearch}>
            <div class="bottom-div" if:false={showSearchPageLoader}>
              <div style="width: 100%; display: flex; justify-content: center">
                <div class="records-count">
                  {labels2.ccp2_ei_search_results} &nbsp; : &nbsp;
                  {searchLength}{labels2.ccp2_ei_items_count}
                </div>
              </div>
              <template if:true={searchLength}>
                <div class="table-container">
                  <div class="table">
                    <div class="table-header">
                      <span class="table-header-item">
                        <p></p>
                      </span>
                      <span class="table-header-item">
                        <template if:false={closeSort}>
                          <template if:false={ascInvoice}>
                            <div
                              onclick={handleInvoiceSortasc}
                              style="display: flex"
                            >
                              <p>{labels2.ccp2_ei_invoice_month}</p>
                              <div onclick={handleInvoiceSortasc}>
                                <svg
                                  onclick={handleInvoiceSortasc}
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="24"
                                  height="25"
                                  viewBox="0 0 24 25"
                                  fill="none"
                                >
                                  <path
                                    onclick={handleInvoiceSortasc}
                                    d="M17.6826 13.9628H6.31741C6.25796 13.9625 6.19962 13.9789 6.14912 14.0101C6.09862 14.0414 6.058 14.0863 6.03194 14.1396C6.00588 14.1928 5.99544 14.2523 6.00182 14.3113C6.0082 14.3702 6.03114 14.4261 6.068 14.4726L11.7506 21.7115C11.7801 21.7494 11.8179 21.7801 11.8611 21.8012C11.9044 21.8223 11.9519 21.8333 12 21.8333C12.0481 21.8333 12.0956 21.8223 12.1389 21.8012C12.1821 21.7801 12.2199 21.7494 12.2494 21.7115L17.932 14.4726C17.9689 14.4261 17.9918 14.3702 17.9982 14.3113C18.0046 14.2523 17.9941 14.1928 17.9681 14.1396C17.942 14.0863 17.9014 14.0414 17.8509 14.0101C17.8004 13.9789 17.742 13.9625 17.6826 13.9628Z"
                                    fill="#262626"
                                  />
                                  <path
                                    onclick={handleInvoiceSortasc}
                                    d="M6.31741 11.7039H17.6826C17.742 11.7042 17.8004 11.6878 17.8509 11.6565C17.9014 11.6253 17.942 11.5804 17.9681 11.5271C17.9941 11.4739 18.0046 11.4143 17.9982 11.3554C17.9918 11.2965 17.9689 11.2405 17.932 11.194L12.2494 3.95514C12.2199 3.91723 12.1821 3.88656 12.1389 3.86545C12.0956 3.84435 12.0481 3.83337 12 3.83337C11.9519 3.83337 11.9044 3.84435 11.8611 3.86545C11.8179 3.88656 11.7801 3.91723 11.7506 3.95514L6.068 11.194C6.03114 11.2405 6.0082 11.2965 6.00182 11.3554C5.99544 11.4143 6.00588 11.4739 6.03194 11.5271C6.058 11.5804 6.09862 11.6253 6.14912 11.6565C6.19962 11.6878 6.25796 11.7042 6.31741 11.7039Z"
                                    fill="#BBBBBB"
                                  />
                                </svg>
                              </div>
                            </div>
                          </template>
                          <template if:true={ascInvoice}>
                            <div
                              onclick={handleInvoicedesc}
                              style="display: flex"
                            >
                              <p>{labels2.ccp2_ei_invoice_month}</p>
                              <div onclick={handleInvoicedesc}>
                                <svg
                                  onclick={handleInvoicedesc}
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="24"
                                  height="24"
                                  viewBox="0 0 24 24"
                                  fill="none"
                                >
                                  <path
                                    onclick={handleInvoicedesc}
                                    d="M17.6826 13.1294H6.31741C6.25796 13.1291 6.19962 13.1455 6.14912 13.1768C6.09862 13.208 6.058 13.2529 6.03194 13.3062C6.00588 13.3594 5.99544 13.419 6.00182 13.4779C6.0082 13.5368 6.03114 13.5928 6.068 13.6393L11.7506 20.8782C11.7801 20.9161 11.8179 20.9467 11.8611 20.9679C11.9044 20.989 11.9519 20.9999 12 20.9999C12.0481 20.9999 12.0956 20.989 12.1389 20.9679C12.1821 20.9467 12.2199 20.9161 12.2494 20.8782L17.932 13.6393C17.9689 13.5928 17.9918 13.5368 17.9982 13.4779C18.0046 13.419 17.9941 13.3594 17.9681 13.3062C17.942 13.2529 17.9014 13.208 17.8509 13.1768C17.8004 13.1455 17.742 13.1291 17.6826 13.1294Z"
                                    fill="#BBBBBB"
                                  />
                                  <path
                                    onclick={handleInvoicedesc}
                                    d="M6.31741 10.8705H17.6826C17.742 10.8709 17.8004 10.8544 17.8509 10.8232C17.9014 10.7919 17.942 10.747 17.9681 10.6938C17.9941 10.6405 18.0046 10.581 17.9982 10.522C17.9918 10.4631 17.9689 10.4072 17.932 10.3607L12.2494 3.12177C12.2199 3.08386 12.1821 3.05318 12.1389 3.03208C12.0956 3.01097 12.0481 3 12 3C11.9519 3 11.9044 3.01097 11.8611 3.03208C11.8179 3.05318 11.7801 3.08386 11.7506 3.12177L6.068 10.3607C6.03114 10.4072 6.0082 10.4631 6.00182 10.522C5.99544 10.581 6.00588 10.6405 6.03194 10.6938C6.058 10.747 6.09862 10.7919 6.14912 10.8232C6.19962 10.8544 6.25796 10.8709 6.31741 10.8705Z"
                                    fill="#262626"
                                  />
                                </svg>
                              </div>
                            </div>
                          </template>
                        </template>
                        <template if:true={closeSort}>
                          <div
                            onclick={handleInvoicedesc}
                            style="display: flex"
                          >
                            <p>{labels2.ccp2_ei_invoice_month}</p>
                            <svg
                              onclick={handleInvoicedesc}
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 24"
                              fill="none"
                            >
                              <path
                                onclick={handleInvoicedesc}
                                d="M17.6826 13.1295H6.31741C6.25796 13.1291 6.19962 13.1456 6.14912 13.1768C6.09862 13.2081 6.058 13.253 6.03194 13.3062C6.00588 13.3595 5.99544 13.419 6.00182 13.478C6.0082 13.5369 6.03114 13.5928 6.068 13.6393L11.7506 20.8782C11.7801 20.9161 11.8179 20.9468 11.8611 20.9679C11.9044 20.989 11.9519 21 12 21C12.0481 21 12.0956 20.989 12.1389 20.9679C12.1821 20.9468 12.2199 20.9161 12.2494 20.8782L17.932 13.6393C17.9689 13.5928 17.9918 13.5369 17.9982 13.478C18.0046 13.419 17.9941 13.3595 17.9681 13.3062C17.942 13.253 17.9014 13.2081 17.8509 13.1768C17.8004 13.1456 17.742 13.1291 17.6826 13.1295ZM6.31741 10.8705H17.6826C17.742 10.8709 17.8004 10.8544 17.8509 10.8232C17.9014 10.7919 17.942 10.747 17.9681 10.6938C17.9941 10.6405 18.0046 10.581 17.9982 10.522C17.9918 10.4631 17.9689 10.4072 17.932 10.3607L12.2494 3.12177C12.2199 3.08386 12.1821 3.05318 12.1389 3.03208C12.0956 3.01097 12.0481 3 12 3C11.9519 3 11.9044 3.01097 11.8611 3.03208C11.8179 3.05318 11.7801 3.08386 11.7506 3.12177L6.068 10.3607C6.03114 10.4072 6.0082 10.4631 6.00182 10.522C5.99544 10.581 6.00588 10.6405 6.03194 10.6938C6.058 10.747 6.09862 10.7919 6.14912 10.8232C6.19962 10.8544 6.25796 10.8709 6.31741 10.8705Z"
                                fill="#262626"
                              />
                            </svg>
                          </div>
                        </template>
                      </span>
                      <span class="table-header-item">
                        <p>{labels2.ccp2_ei_customer_number}</p>
                      </span>
                      <span class="table-header-item">
                        <p>{labels2.ccp2_ei_closing_date}</p>
                      </span>
                      <span class="table-header-item">
                        <p>{labels2.ccp2_ei_issue_status}</p>
                      </span>
                      <span class="table-header-item">
                        <template if:true={closeSort}>
                          <template if:false={ascClosing}>
                            <div
                              onclick={handleClosingSortasc}
                              style="display: flex"
                            >
                              <p>{labels2.ccp2_ei_last_issue_date}</p>
                              <svg
                                onclick={handleClosingSortasc}
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="25"
                                viewBox="0 0 24 25"
                                fill="none"
                              >
                                <path
                                  onclick={handleClosingSortasc}
                                  d="M17.6826 13.9628H6.31741C6.25796 13.9625 6.19962 13.9789 6.14912 14.0101C6.09862 14.0414 6.058 14.0863 6.03194 14.1396C6.00588 14.1928 5.99544 14.2523 6.00182 14.3113C6.0082 14.3702 6.03114 14.4261 6.068 14.4726L11.7506 21.7115C11.7801 21.7494 11.8179 21.7801 11.8611 21.8012C11.9044 21.8223 11.9519 21.8333 12 21.8333C12.0481 21.8333 12.0956 21.8223 12.1389 21.8012C12.1821 21.7801 12.2199 21.7494 12.2494 21.7115L17.932 14.4726C17.9689 14.4261 17.9918 14.3702 17.9982 14.3113C18.0046 14.2523 17.9941 14.1928 17.9681 14.1396C17.942 14.0863 17.9014 14.0414 17.8509 14.0101C17.8004 13.9789 17.742 13.9625 17.6826 13.9628Z"
                                  fill="#262626"
                                />
                                <path
                                  onclick={handleClosingSortasc}
                                  d="M6.31741 11.7039H17.6826C17.742 11.7042 17.8004 11.6878 17.8509 11.6565C17.9014 11.6253 17.942 11.5804 17.9681 11.5271C17.9941 11.4739 18.0046 11.4143 17.9982 11.3554C17.9918 11.2965 17.9689 11.2405 17.932 11.194L12.2494 3.95514C12.2199 3.91723 12.1821 3.88656 12.1389 3.86545C12.0956 3.84435 12.0481 3.83337 12 3.83337C11.9519 3.83337 11.9044 3.84435 11.8611 3.86545C11.8179 3.88656 11.7801 3.91723 11.7506 3.95514L6.068 11.194C6.03114 11.2405 6.0082 11.2965 6.00182 11.3554C5.99544 11.4143 6.00588 11.4739 6.03194 11.5271C6.058 11.5804 6.09862 11.6253 6.14912 11.6565C6.19962 11.6878 6.25796 11.7042 6.31741 11.7039Z"
                                  fill="#BBBBBB"
                                />
                              </svg>
                            </div>
                          </template>
                          <template if:true={ascClosing}>
                            <div
                              onclick={handleClosingdesc}
                              style="display: flex"
                            >
                              <p>{labels2.ccp2_ei_last_issue_date}</p>
                              <svg
                                onclick={handleClosingdesc}
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                fill="none"
                              >
                                <path
                                  onclick={handleClosingdesc}
                                  d="M17.6826 13.1294H6.31741C6.25796 13.1291 6.19962 13.1455 6.14912 13.1768C6.09862 13.208 6.058 13.2529 6.03194 13.3062C6.00588 13.3594 5.99544 13.419 6.00182 13.4779C6.0082 13.5368 6.03114 13.5928 6.068 13.6393L11.7506 20.8782C11.7801 20.9161 11.8179 20.9467 11.8611 20.9679C11.9044 20.989 11.9519 20.9999 12 20.9999C12.0481 20.9999 12.0956 20.989 12.1389 20.9679C12.1821 20.9467 12.2199 20.9161 12.2494 20.8782L17.932 13.6393C17.9689 13.5928 17.9918 13.5368 17.9982 13.4779C18.0046 13.419 17.9941 13.3594 17.9681 13.3062C17.942 13.2529 17.9014 13.208 17.8509 13.1768C17.8004 13.1455 17.742 13.1291 17.6826 13.1294Z"
                                  fill="#BBBBBB"
                                />
                                <path
                                  onclick={handleClosingdesc}
                                  d="M6.31741 10.8705H17.6826C17.742 10.8709 17.8004 10.8544 17.8509 10.8232C17.9014 10.7919 17.942 10.747 17.9681 10.6938C17.9941 10.6405 18.0046 10.581 17.9982 10.522C17.9918 10.4631 17.9689 10.4072 17.932 10.3607L12.2494 3.12177C12.2199 3.08386 12.1821 3.05318 12.1389 3.03208C12.0956 3.01097 12.0481 3 12 3C11.9519 3 11.9044 3.01097 11.8611 3.03208C11.8179 3.05318 11.7801 3.08386 11.7506 3.12177L6.068 10.3607C6.03114 10.4072 6.0082 10.4631 6.00182 10.522C5.99544 10.581 6.00588 10.6405 6.03194 10.6938C6.058 10.747 6.09862 10.7919 6.14912 10.8232C6.19962 10.8544 6.25796 10.8709 6.31741 10.8705Z"
                                  fill="#262626"
                                />
                              </svg>
                            </div>
                          </template>
                        </template>
                        <template if:false={closeSort}>
                          <div
                            onclick={handleClosingdesc}
                            style="display: flex"
                          >
                            <p>{labels2.ccp2_ei_last_issue_date}</p>
                            <svg
                              onclick={handleClosingdesc}
                              xmlns="http://www.w3.org/2000/svg"
                              width="24"
                              height="24"
                              viewBox="0 0 24 24"
                              fill="none"
                            >
                              <path
                                onclick={handleClosingdesc}
                                d="M17.6826 13.1295H6.31741C6.25796 13.1291 6.19962 13.1456 6.14912 13.1768C6.09862 13.2081 6.058 13.253 6.03194 13.3062C6.00588 13.3595 5.99544 13.419 6.00182 13.478C6.0082 13.5369 6.03114 13.5928 6.068 13.6393L11.7506 20.8782C11.7801 20.9161 11.8179 20.9468 11.8611 20.9679C11.9044 20.989 11.9519 21 12 21C12.0481 21 12.0956 20.989 12.1389 20.9679C12.1821 20.9468 12.2199 20.9161 12.2494 20.8782L17.932 13.6393C17.9689 13.5928 17.9918 13.5369 17.9982 13.478C18.0046 13.419 17.9941 13.3595 17.9681 13.3062C17.942 13.253 17.9014 13.2081 17.8509 13.1768C17.8004 13.1456 17.742 13.1291 17.6826 13.1295ZM6.31741 10.8705H17.6826C17.742 10.8709 17.8004 10.8544 17.8509 10.8232C17.9014 10.7919 17.942 10.747 17.9681 10.6938C17.9941 10.6405 18.0046 10.581 17.9982 10.522C17.9918 10.4631 17.9689 10.4072 17.932 10.3607L12.2494 3.12177C12.2199 3.08386 12.1821 3.05318 12.1389 3.03208C12.0956 3.01097 12.0481 3 12 3C11.9519 3 11.9044 3.01097 11.8611 3.03208C11.8179 3.05318 11.7801 3.08386 11.7506 3.12177L6.068 10.3607C6.03114 10.4072 6.0082 10.4631 6.00182 10.522C5.99544 10.581 6.00588 10.6405 6.03194 10.6938C6.058 10.747 6.09862 10.7919 6.14912 10.8232C6.19962 10.8544 6.25796 10.8709 6.31741 10.8705Z"
                                fill="#262626"
                              />
                            </svg>
                          </div>
                        </template>
                      </span>
                      <span class="table-header-item">
                        <p>{labels2.ccp2_ei_last_issuer}</p>
                      </span>
                      <span class="table-header-item">
                        <p>{labels2.ccp2_ei_issue_count}</p>
                      </span>
                      <span class="table-header-item">
                        <p></p>
                      </span>
                    </div>
                    <div class="einvoiceItems">
                      <template for:each={dataSearch} for:item="elm">
                        <div class="table-row" key={elm.dataId}>
                          <input
                            type="checkbox"
                            class="checkbox-item"
                            data-id={elm.dataId}
                            checked={elm.selected}
                            onchange={handleCheckboxChangeDownload}
                          />
                          <span class="table-row-item"
                            >{elm.invoiceDateTodisp}</span
                          >
                          <span class="table-row-item"
                            >{elm.siebelAccountCode}</span
                          >
                          <span class="table-row-item">{elm.closingDate}</span>
                          <span class="table-row-item">{elm.IssueStatus}</span>
                          <span class="table-row-item"
                            >{elm.IssueDateTodisp}</span
                          >
                          <span class="table-row-item">{elm.IssueUser}</span>
                          <span class="table-row-item">{elm.IssueCount}</span>
                          <span
                            class="table-row-item-down"
                            onclick={onClickIssue}
                            data-idd={elm.dataId}
                            data-json={elm.encryptedJson}
                            data-fullnamee={elm.fullFileName}
                            data-logg={elm.logId}
                            data-siebel={elm.siebelAccountCode}
                            data-issue={elm.IssueApply}
                            data-namee={elm.fileName}
                            data-close={elm.closingDate}
                            data-invoicedate={elm.invoiceDate}
                          >
                            <svg
                              onclick={onClickIssue}
                              data-idd={elm.dataId}
                              data-json={elm.encryptedJson}
                              data-fullnamee={elm.fullFileName}
                              data-logg={elm.logId}
                              data-siebel={elm.siebelAccountCode}
                              data-issue={elm.IssueApply}
                              data-namee={elm.fileName}
                              data-close={elm.closingDate}
                              data-invoicedate={elm.invoiceDate}
                              xmlns="http://www.w3.org/2000/svg"
                              width="25"
                              height="25"
                              viewBox="0 0 25 25"
                              fill="none"
                            >
                              <path
                                onclick={onClickIssue}
                                data-idd={elm.dataId}
                                data-json={elm.encryptedJson}
                                data-fullnamee={elm.fullFileName}
                                data-logg={elm.logId}
                                data-siebel={elm.siebelAccountCode}
                                data-issue={elm.IssueApply}
                                data-namee={elm.fileName}
                                data-close={elm.closingDate}
                                data-invoicedate={elm.invoiceDate}
                                d="M18.5 15.5V18.5H6.5V15.5H4.5V18.5C4.5 19.6 5.4 20.5 6.5 20.5H18.5C19.6 20.5 20.5 19.6 20.5 18.5V15.5H18.5ZM17.5 11.5L16.09 10.09L13.5 12.67V4.5H11.5V12.67L8.91 10.09L7.5 11.5L12.5 16.5L17.5 11.5Z"
                                fill="#E10202"
                              />
                            </svg>
                            {labels2.ccp2_ei_issue}
                          </span>
                        </div>
                      </template>
                    </div>
                  </div>
                  <div class="buttons-all-selected">
                    <template if:false={allSelectedLength}>
                      <button class="select-all-btn" onclick={handleSelectAll}>
                        {labels2.ccp2_ei_select_all}
                      </button>
                    </template>
                    <template if:true={allSelectedLength}>
                      <button
                        class="select-all-btn"
                        onclick={handleDeSelectAll}
                      >
                        {labels2.ccp2_ei_deselect_all}
                      </button>
                    </template>
                    <template if:true={selectedListLen}>
                      <button
                        class="download-button"
                        onclick={handleDownloadAll}
                      >
                        {labels2.ccp2_ei_issue}
                      </button>
                    </template>
                    <div class="help-div">
                      <p>{labels2.ccp2_dtfsa_cannotDown}</p>
                      <div class="here-div" onclick={handleClickHere}>
                        <p class="click-here">
                          {labels2.ccp2_dtfsa_cannotDownred}
                        </p>
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                        >
                          <g clip-path="url(#clip0_36315_90380)">
                            <path
                              d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z"
                              fill="#E10202"
                            />
                            <path
                              d="M10.8857 13.7868C10.819 13.3308 10.8429 12.926 10.9571 12.5723C11.081 12.2187 11.2524 11.9023 11.4714 11.6231C11.6905 11.3346 11.9143 11.0647 12.1429 10.8135C12.3714 10.5622 12.5667 10.3156 12.7286 10.0736C12.8905 9.83164 12.9714 9.57572 12.9714 9.30584C12.9714 9.07318 12.919 8.8731 12.8143 8.70558C12.719 8.52876 12.581 8.39382 12.4 8.30076C12.2286 8.2077 12.0143 8.16117 11.7571 8.16117C11.4429 8.16117 11.1571 8.23562 10.9 8.38452C10.6429 8.52411 10.4 8.71489 10.1714 8.95685L9 7.9099C9.37143 7.49112 9.80952 7.15144 10.3143 6.89086C10.8286 6.63029 11.3952 6.5 12.0143 6.5C12.5857 6.5 13.0952 6.59772 13.5429 6.79315C14 6.98858 14.3571 7.28638 14.6143 7.68655C14.8714 8.07741 15 8.57064 15 9.16624C15 9.56641 14.9143 9.92005 14.7429 10.2272C14.581 10.5343 14.3762 10.8228 14.1286 11.0926C13.8905 11.3532 13.6524 11.6138 13.4143 11.8744C13.1857 12.1349 13 12.4188 12.8571 12.7259C12.7143 13.033 12.6667 13.3866 12.7143 13.7868H10.8857ZM11.8143 17.5C11.4333 17.5 11.119 17.3697 10.8714 17.1091C10.6238 16.8486 10.5 16.5321 10.5 16.1599C10.5 15.769 10.6238 15.448 10.8714 15.1967C11.119 14.9454 11.4333 14.8198 11.8143 14.8198C12.1857 14.8198 12.4952 14.9454 12.7429 15.1967C12.9905 15.448 13.1143 15.769 13.1143 16.1599C13.1143 16.5321 12.9905 16.8486 12.7429 17.1091C12.4952 17.3697 12.1857 17.5 11.8143 17.5Z"
                              fill="#E10202"
                            />
                          </g>
                          <defs>
                            <clipPath id="clip0_36315_90380">
                              <rect width="24" height="24" fill="white" />
                            </clipPath>
                          </defs>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              </template>
              <template if:false={searchLength}>
                <div class="noSearch">
                  <div>
                    <img src={nosearch} alt="No Search" />
                  </div>
                  <div>{labels2.ccp2_ei_no_invoices}</div>
                </div>
              </template>
            </div>
          </template>
        </div>
      </div>
    </div>
  </div>
  <template if:true={isShowReissueModal}>
    <div class="modal-background-last">
      <div class="modal-window-small">
        <div class="warning-modal">
          <p class="warntxt">{labels2.ccp2_ei_invoice_already_downloaded}</p>
          <p class="warntxt more">{labels2.ccp2_ei_re_download_invoice}</p>
        </div>
        <div class="buttons-all">
          <button class="cancelbutton-download" onclick={handleNoReissue}>
            {labels2.ccp2_ei_no}
          </button>
          <button class="download-button2" onclick={onClickReissueYesModal}>
            {labels2.ccp2_ei_yes}
          </button>
        </div>
      </div>
    </div>
  </template>
  <template if:true={isShowReissueModal2}>
    <div class="modal-background-last">
      <div class="modal-window-small">
        <div class="warning-modal">
          <p class="warntxt">{labels2.ccp2_ei_invoice_already_downloaded}</p>
          <p class="warntxt more">{labels2.ccp2_ei_re_download_invoice}</p>
        </div>
        <div class="buttons-all">
          <button class="cancelbutton-download" onclick={handleNoReissue2}>
            {labels2.ccp2_ei_no}
          </button>
          <button class="download-button2" onclick={onClickReissueYesModal2}>
            {labels2.ccp2_ei_yes}
          </button>
        </div>
      </div>
    </div>
  </template>
  <template if:true={isModalOpen}>
    <div class="modal-background-last">
      <div class="modal-window-small2">
        <div class="warning-modal2">
          <template if:true={allfilesdownloaded}>
            <p class="warntxt">{labels2.ccp2_ei_downloaded_header}</p>
          </template>
          <template if:false={allfilesdownloaded}>
            <p class="warntxt">{labels2.ccp2_ei_file_downloading}</p>
          </template>
          <div class="documents-div scrollbar2">
            <template for:each={fileStatuses} for:item="file">
              <div key={file.name} class="status-row">
                <div class="file-name">
                  <div>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M21.3746 5.08929C21.6246 5.33929 21.8389 5.67857 22.0174 6.10714C22.196 6.53571 22.2853 6.92857 22.2853 7.28571V22.7143C22.2853 23.0714 22.1603 23.375 21.9103 23.625C21.6603 23.875 21.3567 24 20.9996 24H2.99958C2.64244 24 2.33887 23.875 2.08887 23.625C1.83887 23.375 1.71387 23.0714 1.71387 22.7143V1.28571C1.71387 0.928571 1.83887 0.625 2.08887 0.375C2.33887 0.125 2.64244 0 2.99958 0H14.9996C15.3567 0 15.7496 0.0892857 16.1782 0.267857C16.6067 0.446429 16.946 0.660714 17.196 0.910714L21.3746 5.08929ZM15.4282 1.82143V6.85714H20.4639C20.3746 6.59821 20.2764 6.41518 20.1692 6.30804L15.9773 2.11607C15.8701 2.00893 15.6871 1.91071 15.4282 1.82143ZM20.571 22.2857V8.57143H14.9996C14.6424 8.57143 14.3389 8.44643 14.0889 8.19643C13.8389 7.94643 13.7139 7.64286 13.7139 7.28571V1.71429H3.42815V22.2857H20.571ZM6.85672 10.7143C6.85672 10.5893 6.8969 10.4866 6.97726 10.4062C7.05762 10.3259 7.1603 10.2857 7.2853 10.2857H16.7139C16.8389 10.2857 16.9415 10.3259 17.0219 10.4062C17.1023 10.4866 17.1424 10.5893 17.1424 10.7143V11.5714C17.1424 11.6964 17.1023 11.7991 17.0219 11.8795C16.9415 11.9598 16.8389 12 16.7139 12H7.2853C7.1603 12 7.05762 11.9598 6.97726 11.8795C6.8969 11.7991 6.85672 11.6964 6.85672 11.5714V10.7143ZM16.7139 13.7143C16.8389 13.7143 16.9415 13.7545 17.0219 13.8348C17.1023 13.9152 17.1424 14.0179 17.1424 14.1429V15C17.1424 15.125 17.1023 15.2277 17.0219 15.308C16.9415 15.3884 16.8389 15.4286 16.7139 15.4286H7.2853C7.1603 15.4286 7.05762 15.3884 6.97726 15.308C6.8969 15.2277 6.85672 15.125 6.85672 15V14.1429C6.85672 14.0179 6.8969 13.9152 6.97726 13.8348C7.05762 13.7545 7.1603 13.7143 7.2853 13.7143H16.7139ZM16.7139 17.1429C16.8389 17.1429 16.9415 17.183 17.0219 17.2634C17.1023 17.3438 17.1424 17.4464 17.1424 17.5714V18.4286C17.1424 18.5536 17.1023 18.6562 17.0219 18.7366C16.9415 18.817 16.8389 18.8571 16.7139 18.8571H7.2853C7.1603 18.8571 7.05762 18.817 6.97726 18.7366C6.8969 18.6562 6.85672 18.5536 6.85672 18.4286V17.5714C6.85672 17.4464 6.8969 17.3438 6.97726 17.2634C7.05762 17.183 7.1603 17.1429 7.2853 17.1429H16.7139Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                  <p title={file.name}>{file.ellname}</p>
                </div>
                <div class="file-status">
                  {file.status}
                  <div class="loader-container" if:true={file.isDownloading}>
                    <div class="loader"></div>
                  </div>
                  <div class="loader-container" if:true={file.isDownloaded}>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="22"
                      height="22"
                      viewBox="0 0 22 22"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_25593_164559)">
                        <path
                          d="M10.9984 21.9968C17.0726 21.9968 21.9968 17.0726 21.9968 10.9984C21.9968 4.92415 17.0726 0 10.9984 0C4.92415 0 0 4.92415 0 10.9984C0 17.0726 4.92415 21.9968 10.9984 21.9968Z"
                          fill="#2BB44C"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M8.28224 12.5904L15.5876 6.7899C15.7653 6.65007 15.9803 6.56585 16.2057 6.54784C16.4311 6.52982 16.6568 6.57881 16.8544 6.68864C17.0521 6.79847 17.2128 6.96426 17.3165 7.16517C17.4203 7.36608 17.4623 7.59316 17.4374 7.81788C17.4206 7.96746 17.3743 8.11224 17.3013 8.24387C17.2283 8.3755 17.13 8.49138 17.012 8.58483L8.71405 15.1716L8.63349 15.2361C8.60028 15.2594 8.56586 15.2809 8.53037 15.3005L8.48525 15.3295C8.22329 15.4648 7.9192 15.4938 7.63641 15.4103C7.35362 15.3269 7.11397 15.1375 6.96746 14.8816L6.83856 14.6657L4.70849 10.963C4.63379 10.8331 4.58542 10.6898 4.56613 10.5411C4.54684 10.3925 4.55701 10.2416 4.59607 10.0969C4.63512 9.95222 4.70228 9.81665 4.79373 9.69792C4.88517 9.5792 4.9991 9.47965 5.12902 9.40496C5.3914 9.25411 5.70296 9.21367 5.99516 9.29254C6.13984 9.33159 6.27541 9.39875 6.39413 9.4902C6.51286 9.58164 6.61241 9.69558 6.6871 9.82549L8.28546 12.5904H8.28224Z"
                          fill="white"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_25593_164559">
                          <rect width="22" height="22" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>
        <div class="buttons-small">
          <button onclick={closeModal} class="download-button">
            {labels2.ccp2_ei_yes}
          </button>
        </div>
      </div>
    </div>
  </template>
  <template if:true={openHelpmodal}>
    <div class="modal-background-last">
      <div class="modal-window-small-help">
        <div class="help-modal">
          <div class="cross">
            <svg
              style="cursor: pointer"
              onclick={closeHelp}
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                style="cursor: pointer"
                onclick={closeHelp}
                d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"
                fill="black"
              />
            </svg>
          </div>
          <div class="help-scroll help-modal">
            <div class="red-modal">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="25"
                viewBox="0 0 24 25"
                fill="none"
              >
                <g clip-path="url(#clip0_36203_225146)">
                  <path
                    d="M12 2.5C6.48 2.5 2 6.98 2 12.5C2 18.02 6.48 22.5 12 22.5C17.52 22.5 22 18.02 22 12.5C22 6.98 17.52 2.5 12 2.5ZM12 20.5C7.59 20.5 4 16.91 4 12.5C4 8.09 7.59 4.5 12 4.5C16.41 4.5 20 8.09 20 12.5C20 16.91 16.41 20.5 12 20.5Z"
                    fill="#E10202"
                  />
                  <path
                    d="M10.8857 14.2868C10.819 13.8308 10.8429 13.426 10.9571 13.0723C11.081 12.7187 11.2524 12.4023 11.4714 12.1231C11.6905 11.8346 11.9143 11.5647 12.1429 11.3135C12.3714 11.0622 12.5667 10.8156 12.7286 10.5736C12.8905 10.3316 12.9714 10.0757 12.9714 9.80584C12.9714 9.57318 12.919 9.3731 12.8143 9.20558C12.719 9.02876 12.581 8.89382 12.4 8.80076C12.2286 8.7077 12.0143 8.66117 11.7571 8.66117C11.4429 8.66117 11.1571 8.73562 10.9 8.88452C10.6429 9.02411 10.4 9.21489 10.1714 9.45685L9 8.4099C9.37143 7.99112 9.80952 7.65144 10.3143 7.39086C10.8286 7.13029 11.3952 7 12.0143 7C12.5857 7 13.0952 7.09772 13.5429 7.29315C14 7.48858 14.3571 7.78638 14.6143 8.18655C14.8714 8.57741 15 9.07064 15 9.66624C15 10.0664 14.9143 10.4201 14.7429 10.7272C14.581 11.0343 14.3762 11.3228 14.1286 11.5926C13.8905 11.8532 13.6524 12.1138 13.4143 12.3744C13.1857 12.6349 13 12.9188 12.8571 13.2259C12.7143 13.533 12.6667 13.8866 12.7143 14.2868H10.8857ZM11.8143 18C11.4333 18 11.119 17.8697 10.8714 17.6091C10.6238 17.3486 10.5 17.0321 10.5 16.6599C10.5 16.269 10.6238 15.948 10.8714 15.6967C11.119 15.4454 11.4333 15.3198 11.8143 15.3198C12.1857 15.3198 12.4952 15.4454 12.7429 15.6967C12.9905 15.948 13.1143 16.269 13.1143 16.6599C13.1143 17.0321 12.9905 17.3486 12.7429 17.6091C12.4952 17.8697 12.1857 18 11.8143 18Z"
                    fill="#E10202"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_36203_225146">
                    <rect
                      width="24"
                      height="24"
                      fill="white"
                      transform="translate(0 0.5)"
                    />
                  </clipPath>
                </defs>
              </svg>
              <p>{labels2.ccp2_dtfsa_bulkDown}</p>
            </div>
            <div>
              <p>{labels2.ccp2_dtfsa_popUp1}</p>
              <p>{labels2.ccp2_dtfsa_popUp2}</p>
            </div>
            <div>
              <img src={help1} alt="help" />
            </div>
            <div>
              <p>{labels2.ccp2_dtfsa_regardSite1}</p>
              <p>{labels2.ccp2_dtfsa_regardSite2}</p>
            </div>
            <div>
              <img src={help2} alt="help" />
            </div>
            <div style="padding-bottom: 30px">
              <p>{labels2.ccp2_dtfsa_avail1}</p>
              <p>{labels2.ccp2_dtfsa_avail2}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>
  <!-- <template if:false={hasinvoice}>
    <div class="modal-background-last">
      <div class="modal-window-small-dtfsa">
        <div class="dtfsa-div">
          <div class="perm">
            <p>{labels2.ccp2_dtfsa_noAcc1}</p>
            <p>{labels2.ccp2_dtfsa_noAcc2}</p>
          </div>
          <button class="search-button" onclick={navigateToHome}>{labels2.ccp2_dtfsa_return}</button>
        </div>
      </div>
    </div>
  </template> -->
  <template if:true={serverError}>
    <div class="modal-background-last">
      <div class="modal-window-small-dtfsa">
        <div class="dtfsa-div">
          <p style="font-weight: 700">{labels2.ccp2_dtfsa_commErr}</p>
          <div class="perm">
            <p>{labels2.ccp2_dtfsa_serverErr}</p>
            <p>{labels2.ccp2_dtfsa_tryAgain}</p>
          </div>
          <button class="search-button" onclick={handleServerErr}>OK</button>
        </div>
      </div>
    </div>
  </template>
</template>
